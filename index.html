<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" /> <!-- FIX: user-scalabled -> user-scalable -->
  <title>ì €í¬ ê²°í˜¼í•©ë‹ˆë‹¤ | ë¯¼ê·œ â™¥ í™ì„ </title>

  <link rel="preconnect" href="https://mghswedding.github.io" crossorigin>
  <!-- OG / ê³µìœ  ì¸ë„¤ì¼ -->
  <meta property="og:title" content="ì €í¬ ê²°í˜¼í•©ë‹ˆë‹¤" />
  <meta property="og:description" content="2026ë…„ 5ì›” 30ì¼ (í† ) ì˜¤í›„ 3ì‹œ 30ë¶„ Â· ì±„í”Œì›¨ë”©í™€ ì•„ë²¤í‹°ì›€" />
  <meta property="og:image" content="https://mghswedding.github.io/og-1200x630.jpg" />

  <!-- í°íŠ¸ í”„ë¦¬ë¡œë“œ -->
  <link rel="preload" href="./Autography.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="./HakgyoansimGeurimilgiOTFR.otf" as="font" type="font/otf" crossorigin>
  <link rel="preload" href="./HakgyoansimGeurimilgiTTFR.ttf" as="font" type="font/ttf" crossorigin>
  <!-- SVG ì „ìš©: ë£¨íŠ¸ì˜ OTF ì‚¬ìš© -->
  <link rel="preload" href="./Autography.otf" as="font" type="font/otf" crossorigin>

  <link rel="icon" href="/favicon.ico" />

  <style>
    /* =========================
      0) Webfonts
      ========================= */
    @font-face {
      font-family: "SUIT Variable";
      src: url("https://cdn.jsdelivr.net/gh/sunn-us/SUIT/fonts/woff2/SUIT-Variable.woff2") format("woff2-variations");
      font-weight: 100 900; font-style: normal; font-display: swap;
    }
    @font-face{
      font-family: "Autography";
      src: url("./Autography.woff2") format("woff2");
      font-weight: 400 800; font-style: normal; font-display: swap;
    }
    @font-face{
      font-family: "Hakgyoansim Geurimilgi";
      src:
        url("./HakgyoansimGeurimilgiOTFR.otf") format("opentype"),
        url("./HakgyoansimGeurimilgiTTFR.ttf") format("truetype");
      font-weight: normal; font-style: normal; font-display: swap;
    }
    @font-face{
      font-family: "AutographySVG";
      src: url("./Autography.otf") format("opentype");
      font-weight: 400 800; font-style: normal; font-display: swap;
    }

    /* =========================
      1) Root / Base
      ========================= */
    :root{
      --accent: #edacb1;
      --ink: #313131;
      --bg: #fff;
      --soft-bg: #fff5f9;
      --muted: #777;
      --radius: 14px;
      --shadow: 0 8px 32px rgba(0,0,0,.06);
      --maxw: 420px;

      --font-sans: "SUIT Variable", "Noto Sans KR", Apple SD Gothic Neo, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
      --font-fancy: "Autography", "Hakgyoansim Geurimilgi", "SUIT Variable", system-ui, -apple-system, "Noto Sans KR", sans-serif;

      /* SVG í•„ê¸° ì• ë‹ˆ ì†ë„ */
      --draw-dur: 1.25s;
      --fill-dur: 1.20s;
      --per-letter: .08s;
      --fill-gap: .60s;

      --inv-track:.02em;
      --bride-nudge:.7px;

      --reveal-dur: 900ms; /* ì¸í„°ë·° ë“±ì¥ */
    }

    *{ box-sizing:border-box; }
    html{ font-size: calc(16px + 2pt); }
    @media (max-width: 759px){ html{ font-size: calc(16px + 2pt); } }

    html,body{
      margin:0; padding:0; background:var(--bg); color:var(--ink);
      font-family:var(--font-fancy); -webkit-font-smoothing:antialiased;
      overflow-x:hidden; width:100%;
    }

    a{ color:inherit; text-decoration:none; }

    /* ê°€ìš´ë° ì •ë ¬ ë˜í¼ */
    .wrap{
      max-width: var(--maxw);
      width: 100%;
      margin: 0 auto;
      padding: 0 10px;
    }
    .wrap > section{ margin: 36px 0; }
    @media (min-width:760px){ .wrap > section{ margin: 48px 0; } }

    /* =========================
      2) HERO
      ========================= */
    .hero{
      position:relative; overflow:hidden; border-radius:var(--radius);
      height:560px; background:#000; color:#fff;
      display:flex; align-items:flex-end; justify-content:center; text-align:center;
      box-shadow:var(--shadow); width:100%;
    }
    .hero-media{
      position:absolute; inset:0; z-index:0; display:block; width:100%; height:100%; object-fit:cover;
      animation: kenburnsPlus 26s ease-in-out infinite;
      filter: brightness(1.04) contrast(1.03) saturate(1.06) drop-shadow(0 12px 40px rgba(0,0,0,.28));
      transform: scale(1.02);
      transform-origin: 50% 60%;
      will-change: transform;
      -webkit-mask-image: radial-gradient(120% 100% at 50% 35%, #000 62%, rgba(0,0,0,0) 100%);
              mask-image: radial-gradient(120% 100% at 50% 35%, #000 62%, rgba(0,0,0,0) 100%);
      -webkit-mask-composite: source-over;
    }
    @keyframes kenburnsPlus{
      0%   { transform: scale(1.04) translate3d(0, 0, 0) rotate(.2deg); transform-origin: 48% 62%; }
      25%  { transform: scale(1.08) translate3d(-1.5%, -1.2%, 0) rotate(-.35deg); transform-origin: 45% 58%; }
      50%  { transform: scale(1.10) translate3d(1.0%, -1.6%, 0) rotate(.35deg);  transform-origin: 55% 52%; }
      75%  { transform: scale(1.08) translate3d(1.4%, 0.6%, 0) rotate(-.2deg);   transform-origin: 52% 66%; }
      100% { transform: scale(1.04) translate3d(0, 0, 0) rotate(.2deg);           transform-origin: 48% 62%; }
    }
    .hero::after{
      content:""; position:absolute; inset:0; z-index:1;
      background:
        radial-gradient(80% 40% at 50% 0%, rgba(0,0,0,.15) 0%, rgba(0,0,0,0) 60%),
        linear-gradient(0deg, rgba(0,0,0,.34) 0%, rgba(0,0,0,.18) 36%, rgba(0,0,0,0) 70%);
    }

    /* SVG íƒ€ì´í¬ê·¸ë˜í”¼ */
    .hero-svg{
      position:absolute; inset:0; width:100%; height:100%;
      pointer-events:none; z-index:2;
      contain: paint; backface-visibility: hidden; transform: translateZ(0);
    }
    .hero-svg text{ text-anchor: middle; paint-order: stroke fill; }
    .hero-inner{ position:relative; z-index:4; padding:40px 18px 26px; }
    .svg-top{ animation: floatTop 8s ease-in-out infinite; }
    @keyframes floatTop{ 0%,100%{ transform: translateY(0px) } 50%{ transform: translateY(2px) } }
    .svg-top .stroke{
      fill: transparent; stroke: rgba(255,255,255,.7); stroke-width: 2.6px;
      stroke-linecap: round; stroke-linejoin: round; vector-effect: non-scaling-stroke;
      filter: none !important;
    }
    .fill-top{    fill:#CDEED3; fill-opacity:1; }
    .fill-bottom{ fill:#E89CB2; fill-opacity:1; }
    .hero-svg .fancy{ font-family: "AutographySVG","Autography","Hakgyoansim Geurimilgi",cursive; letter-spacing:.02em; }
    .hero-svg .wgm-line{ letter-spacing: -0.16em; visibility: visible !important; }

    .glyph{ opacity: 0; }
    .glyph.stroke{
      stroke-dasharray: 1200; stroke-dashoffset: 1200;
      animation: wgmDraw var(--draw-dur) ease forwards;
      animation-delay: calc(var(--row-delay, 0s) + var(--i) * var(--per-letter));
      will-change: stroke-dashoffset; backface-visibility: hidden;
    }
    @keyframes wgmDraw{
      0% { opacity:1; stroke-dashoffset:1200; filter:blur(.2px) }
      85%{ opacity:1; }
      100%{ opacity:1; stroke-dashoffset:0; }
    }
    .glyph.fill{
      animation: wgmFill var(--fill-dur) ease forwards;
      animation-delay: calc(var(--row-delay, 0s) + var(--fill-gap) + var(--i) * var(--per-letter));
    }
    @keyframes wgmFill{
      from { opacity:0; transform: translateY(4px) scale(1.01) }
      to   { opacity:1; transform:none }
    }
    .wgm-row{
      transform-origin: 50% 50%;
      animation: wgmTiltDiag var(--intro-dur, 700ms) cubic-bezier(.2,.65,.2,1) both;
      animation-delay: var(--row-delay, 0s);
    }
    @keyframes wgmTiltDiag{
      0%{ opacity:0; transform: translate(-22px,16px) rotate(-4deg) skewX(-3deg); }
      100%{ opacity:1; transform: translate(0,0) rotate(1.8deg) skewX(1.2deg); }
    }
    @media (max-width:480px){
      :root{ --draw-dur:1.15s; --fill-dur:1.10s; --per-letter:.10s; --fill-gap:.55s; }
      @keyframes kenburnsPlus{
        0%{ transform: scale(1.03) translate3d(0,0,0) rotate(.1deg); }
        50%{ transform: scale(1.06) translate3d(.6%,-.6%,0) rotate(.2deg); }
        100%{ transform: scale(1.03) translate3d(0,0,0) rotate(.1deg); }
      }
    }
    .hero-svg.measuring .wgm-row{ animation:none !important; transform:none !important; }
    .hero-svg.animfix .svg-top{ -webkit-mask:none !important; mask:none !important; clip-path:none !important; }
    .hero-svg.done .glyph,
    .hero-svg.done .glyph.stroke,
    .hero-svg.done .glyph.fill{ animation:none !important; opacity:1 !important; }
    .hero-svg.done .glyph.stroke{ stroke-dashoffset:0 !important; }
    .hero-svg.done .wgm-row, .hero-svg.done .svg-top{ animation-play-state: paused !important; }

    .date-plain{
      color:#fff; line-height:1.42; display:inline-block; font-weight:500;
      text-shadow: 0 2px 6px rgba(0,0,0,.35); max-width:100%;
    }
    .date-plain .d1, .date-plain .d2{ display:block; }
    .date-plain .d1{ font-size:1.08rem; }
    .date-plain .d2{ font-size:1.0rem; opacity:.98; }

    .dday-badge{
      position:absolute; top:10px; left:50%; transform:translateX(-50%);
      z-index:4; background:rgba(0,0,0,.34); border:1px solid rgba(255,255,255,.45);
      padding:6px 10px; border-radius:999px; font-size:.78rem; backdrop-filter: blur(6px);
      color:#fff; text-shadow:0 1px 2px rgba(0,0,0,.35); white-space:nowrap;
    }

    /* =========================
      3) Common UI
      ========================= */
    h2.section-title{
      text-align:center; margin:22px 0 8px; color:var(--accent);
      font-weight:400; letter-spacing:.02em; font-size:1.2rem;
    }
    .card{ background:#fff; border-radius:var(--radius); box-shadow:var(--shadow); padding:14px; margin:10px 0; }
    .grid{ display:grid; gap:12px; }
    @media (min-width:760px){
      .grid.cols-2{ grid-template-columns:1fr 1fr; }
      .grid.cols-3{ grid-template-columns:repeat(3,1fr); }
    }
    .muted{ color:var(--muted); }
    .center{ text-align:center; }
    .small{ font-size:1rem; }
    .btn{
      display:inline-flex; align-items:center; justify-content:center; gap:8px;
      padding:12px 14px; border-radius:10px; background:var(--accent); color:#313131;
      font-weight:700; border:none; cursor:pointer; box-shadow:0 6px 18px rgba(237,172,177,.35);
      font-size:.92rem; white-space:nowrap;
    }
    .btn.ghost{ background:#fff; border:1px solid #eee; box-shadow:none; }
    .btns{ display:flex; gap:8px; flex-wrap:wrap; justify-content:center; }
    .divider{ height:1px; background:linear-gradient(90deg,transparent,#eee,transparent); margin:12px 0; }
    details{ border-radius:12px; padding:0; overflow:hidden; border:none; }
    details summary{
      cursor:pointer; list-style:none; font-weight:800; display:flex; align-items:center; justify-content:space-between;
      font-size:.95rem; padding:12px 14px;
    }
    details .rows{ padding:8px 14px 12px; }
    .row{ display:flex; gap:8px; align-items:center; justify-content:space-between; flex-wrap:wrap; }
    .copy{ font-size:.78rem; border:1px dashed #7774; border-radius:999px; padding:4px 8px; cursor:pointer; }

    /* =========================
      4) Interview
      ========================= */
    .interview{ padding:8px; background:#fff7fa; border-radius:14px; }
    .interview .title{
      text-align:center; margin:22px 0 8px; color:var(--accent); letter-spacing:.02em; font-weight:400; font-size:1.2rem;
    }
    .interview .subtitle{ text-align:center; margin:0 0 6px; color:var(--muted); font-size:1rem; font-weight:400; }
    .interview-inner{ max-width:460px; margin:0 auto; }
    .inter-q{
      font-size: calc(1.8rem * .7); margin:8px 0 6px; text-align:center; font-weight:800;
      opacity:0; transform: translateY(14px);
    }
    .inter-q.show{ animation: qIn var(--reveal-dur) cubic-bezier(.2,.7,.2,1.1) forwards; }
    @keyframes qIn{ 0%{opacity:0; transform:translateY(16px)} 100%{opacity:1; transform:none} }

    .bubble_container{ display:grid; gap:2px; margin:0 0 6px; }
    .bubble_box{
      display:flex; flex-direction:column; gap:1px; width:72%; margin:0 auto;
      opacity:0; filter: blur(3px);
      transform: translateY(22px) scale(.96);
      will-change: transform, opacity, filter;
    }
    .bubble_box.left{  align-items:flex-start; transform: translate(-10px,22px) scale(.96); }
    .bubble_box.right{ align-items:flex-end;   transform: translate(10px,22px) scale(.96); }
    .bubble_box .name{ font-weight:900; font-size: calc(1.64rem * .7); color:#777; line-height:1.12; }
    .bubble_text{
      display:inline-block; border-radius:12px; padding: calc(12px * .7) calc(14px * .7);
      font-size: calc(1.8rem * .7); line-height:1.44; box-shadow:var(--shadow); max-width:100%;
      word-break: keep-all;
    }
    .left .bubble_text{ background:#eaf6ff; }
    .right .bubble_text{ background:var(--accent); color:#313131; }
    .bubble_box.show{
      animation: bubbleIn var(--reveal-dur) cubic-bezier(.2,.7,.2,1.1) forwards;
      animation-delay: var(--delay, 0s);
    }
    @keyframes bubbleIn{
      0%{ opacity:0; filter:blur(3px); transform: translateY(28px) scale(.95); }
      60%{ opacity:1; filter:blur(0);   transform: translateY(-4px) scale(1.02); }
      100%{ opacity:1; filter:blur(0);  transform: none; }
    }
    .bubble_box.show .bubble_text{
      animation: popShadow calc(var(--reveal-dur) * .9) ease-out forwards;
      animation-delay: calc(var(--delay,0s) + 120ms);
    }
    @keyframes popShadow{
      0%{ box-shadow: 0 4px 10px rgba(0,0,0,.08); }
      60%{ box-shadow: 0 14px 28px rgba(0,0,0,.18); }
      100%{ box-shadow: var(--shadow); }
    }
    @media (max-width:430px){
      .inter-q{ font-size: calc(1.6rem * .7); margin:6px 0 4px; }
      .bubble_container{ gap:2px; margin-bottom:6px; }
      .bubble_box{ width:82%; }
      .bubble_text{ font-size: calc(1.6rem * .7); padding: calc(10px * .7) calc(12px * .7); line-height:1.4; }
      .bubble_box .name{ font-size: calc(1.48rem * .7); }
    }

    /* =========================
      5) Invitation
      ========================= */
    #invitation .poem{ font-size:1.02rem; line-height:1.45; white-space:pre-line; margin:0; }
    #invitation .small{ font-size:1.0rem; }
    #invitation .small p{ margin:0; line-height:1.35; }
    #invitation .small p + p{ margin-top:4px; }

    #invitation .inv-rows .left-info,
    #invitation .inv-rows b{
      letter-spacing: var(--inv-track);
      font-kerning: none;
      font-variant-ligatures: none;
      font-feature-settings: "kern" 0, "liga" 0;
      text-rendering: optimizeSpeed;
    }
    #invitation .inv-rows .left-info:has(.icon-chry){
      letter-spacing: calc(var(--inv-track) + .014em);
    }
    #invitation .inv-rows b.bride{ transform: translateX(calc(var(--bride-nudge) * -1)); }

    .icon-chry{ display:inline-flex; vertical-align:-2px; margin-right:4px; }
    .icon-chry svg{ width:1.05em; height:1.05em; }

    .navi{ display:grid; grid-template-columns: repeat(3, 1fr); gap:8px; align-items:center; justify-items:center; }
    .navi .btn{ width:100%; flex:none; padding:10px 8px; font-size:.9rem; min-width:0; }

    header.wrap{ margin-top:16px; }

    /* ê°€ìš´ë° ì •ë ¬ + ì¢Œìš° ë ë§ì¶¤ ê·¸ë¦¬ë“œ */
    .inv-rows{
      display:grid;
      grid-template-columns: max-content max-content;
      column-gap:12px; row-gap:4px;
      justify-content:center; /* âœ… ì „ì²´ë¥¼ ì¤‘ì•™ìœ¼ë¡œ */
      align-items:baseline;
    }
    .inv-row{ display:contents; }
    .inv-rows .left-info{
      justify-self:start; text-align:left; position:relative; padding-left:5px;
    }
    .inv-rows b{ justify-self:end; white-space:nowrap; }
    .inv-rows .icon-chry{
      position:absolute; left:-16px; top:50%; transform:translateY(-45%); display:inline-flex;
    }

    /* =========================
      6) Account (Accordion)
      ========================= */
    .account{}
    .acc-accordion{ display:grid; gap:12px; }
    .acc-accordion details{
      background:#fff; border:1px solid #eee; border-radius:12px; box-shadow:var(--shadow); overflow:hidden;
    }
    .acc-accordion summary{
      position:relative; padding:14px 44px 14px 14px;
      font-weight:800; font-size:1rem; background:#fafafa; cursor:pointer;
      list-style:none; display:flex; align-items:center; justify-content:space-between;
    }
    .acc-accordion summary::after{
      content:"â–¾"; position:absolute; right:12px; top:50%;
      transform:translateY(-50%); font-size:14px; color:#9aa0a6;
    }
    .acc-accordion details[open] summary::after{ content:"â–´"; }
    .acc-rows{ padding:0; }
    .acc-item{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      padding:14px; border-top:1px dashed #e9e9e9; background:#fff;
    }
    .acc-item:first-child{ border-top:none; }
    .acc-left{ min-width:0; }
    .acc-title{ font-weight:800; margin:0 0 6px; font-size:.95rem; color:#444; }
    .acc-number{ font-family:var(--font-sans); font-size:1.02rem; font-weight:800; letter-spacing:.02em; }
    .acc-bank{ font-size:.88rem; color:var(--muted); margin-top:2px; }
    .btn-copy.copy{
      flex:0 0 auto; border:1px solid #e1e1e1; background:#fff; border-radius:10px;
      font-size:.86rem; padding:8px 10px; cursor:pointer;
    }
    .btn-copy.copy:active{ transform:translateY(1px); }
    #acc-groom{ border-color:#d5ecff; }       #acc-groom > summary{ background:#eaf6ff; }
    #acc-bride{ border-color:#ffe1ea; }       #acc-bride > summary{ background:#fff0f5; }
    #acc-groom[open] > summary::after{ color:#68a9da; }  #acc-bride[open] > summary::after{ color:#e38cab; }
    #acc-groom .acc-item{ background:#ffffff; } #acc-bride .acc-item{ background:#ffffff; }

    /* =========================
      7) D-DAY
      ========================= */
    .countdown{ display:flex; justify-content:center; gap:6px; margin-top:4px; flex-wrap:wrap; }
    .cd-box{ width:70px; height:70px; border-radius:12px; background:#fff; box-shadow:var(--shadow); display:flex; flex-direction:column; align-items:center; justify-content:center; }
    .cd-number{ font-size:1.16rem; font-weight:800; }
    .cd-label{ font-size:.7rem; color:var(--muted); }

    /* =========================
      8) Gallery (Horizontal)
      ========================= */
    .gallery-wrap{ position:relative; }
    .gallery{
      display:flex; align-items:center; gap:12px; padding:0 10px;
      overflow-x:auto; overflow-y:hidden;
      scroll-snap-type:x mandatory;
      -webkit-overflow-scrolling: touch;
      overscroll-behavior-x: contain;
      touch-action: pan-x; /* ìˆ˜í‰ ì œìŠ¤ì²˜ ë„¤ì´í‹°ë¸Œ */
    }
    .gallery::-webkit-scrollbar{ display:none; }
    .gallery{ scrollbar-width:none; }

    .gallery picture{
      flex:0 0 auto; width:70vw; max-width:280px; aspect-ratio:3/4; height:auto;
      display:block; scroll-snap-align:center; scroll-snap-stop:always;
    }
    @media (max-width:559px){ .gallery picture{ width:72vw; max-width:240px; } }
    @media (min-width:560px) and (max-width:759px){ .gallery picture{ width:60vw; max-width:300px; } }
    @media (min-width:760px){ .gallery picture{ width:50vw; max-width:320px; } }

    .gallery picture > img{
      width:100%; height:100%; object-fit:cover; display:block;
      border-radius:10px; cursor:pointer; -webkit-user-drag:none; user-select:none;
    }

    /* =========================
      9) Lightbox (FIX: í™”ì‚´í‘œ í´ë¦­ ì´ìŠˆ)
      ========================= */
    .no-save{ -webkit-user-drag:none; user-select:none; -webkit-user-select:none; }

    .lightbox{
      position:fixed; inset:0; background:rgba(0,0,0,.85);
      display:none; align-items:center; justify-content:center; z-index:50;
    }
    .lightbox.open{ display:flex; }

    .lightbox .lb-inner{
      position:relative; max-width:92vw; max-height:86vh;
      display:flex; align-items:center; justify-content:center; z-index:0;
    }

    .lightbox img{
      max-width:92vw; max-height:86vh; border-radius:12px;
      box-shadow:0 8px 40px rgba(0,0,0,.5);
      object-fit:contain; touch-action:none;
      position:relative; z-index:1; /* ì´ë¯¸ì§€ z-indexëŠ” ë‚®ê²Œ ë‘  */
    }

    /* â† í•µì‹¬ ìˆ˜ì •: ë²„íŠ¼ì´ í•­ìƒ ìœ„(z:5), íˆíŠ¸ì˜ì—­â†‘, pointer-events ë³´ì¥ */
    .lightbox .prev,
    .lightbox .next{
      position:absolute; top:50%; transform:translateY(-50%);
      font-size:42px; color:#fff; cursor:pointer;
      user-select:none; -webkit-user-select:none;
      -webkit-tap-highlight-color:transparent;
      touch-action: manipulation;
      background:none; border:none; box-shadow:none;
      width:auto; height:auto; min-width:44px; min-height:44px; padding:0 6px;
      display:flex; align-items:center; justify-content:center;
      pointer-events:auto;
      z-index:5;
    }
    .lightbox .prev{ left:16px; }
    .lightbox .next{ right:16px; }

    @media (max-width:560px){
      .lightbox .prev{ left:10px; }
      .lightbox .next{ right:10px; }
      .lightbox .prev, .lightbox .next{ font-size:36px; }
    }

    /* ì»¨í…Œì´ë„ˆ í„°ì¹˜ ì œìŠ¤ì²˜ ì¶©ëŒ ë°©ì§€ */
    .lightbox, .lightbox .lb-inner{
      touch-action:none; overscroll-behavior:contain;
      -webkit-user-select:none; -webkit-touch-callout:none;
    }

    /* í˜ì´ì§€ í‘œì‹œ(ë²„íŠ¼ë³´ë‹¤ ë‚®ê²Œ) */
    .lb-pager{
      position:absolute; left:50%; bottom:10px; transform:translateX(-50%);
      padding:6px 10px; border-radius:999px;
      background:rgba(0,0,0,.55); color:#fff;
      font-family:var(--font-sans); font-weight:800; font-size:.50rem;
      line-height:1; letter-spacing:.02em;
      backdrop-filter:blur(6px);
      border:1px solid rgba(255,255,255,.35);
      user-select:none; z-index:2;
    }
    @media (min-width:760px){ .lb-pager{ display:none; } }

    .lightbox .prev,
    .lightbox .next{
      position: absolute !important;
      top: 0 !important;
      bottom: 0 !important;
      transform: none !important;               /* ì¤‘ì•™ ì •ë ¬ íŠ¸ëœìŠ¤í¼ ì œê±° */
      width: clamp(48px, 10vw, 80px) !important;/* ì„¸ë¡œ ìŠ¤íŠ¸ë¦½ íˆíŠ¸ì˜ì—­ */
      padding: 0 !important;
      margin: 0 !important;

      display: flex !important;
      align-items: center !important;
      justify-content: center !important;

      background: linear-gradient(to right, rgba(0,0,0,.12), rgba(0,0,0,0)) !important;
      color: #fff !important;
      font-size: clamp(32px, 4.6vw, 48px) !important;
      line-height: 1 !important;

      user-select: none !important;
      -webkit-user-select: none !important;
      -webkit-tap-highlight-color: transparent !important;
      touch-action: manipulation !important;
      pointer-events: auto !important;
      z-index: 6 !important;                     /* ì´ë¯¸ì§€/í˜ì´ì €ë³´ë‹¤ ìœ„ */
      border: 0 !important;
      box-shadow: none !important;
    }

    .lightbox .prev{ 
      left: 0 !important;
      right: auto !important;
      border-radius: 0 8px 8px 0 !important;     /* ì‚´ì§ë§Œ ë‘¥ê¸€ê²Œ(ì„ íƒ) */
      /* ì¢Œì¸¡ì€ ì™¼ìª½â†’ì˜¤ë¥¸ìª½ ë°©í–¥ ê·¸ë¼ë°ì´ì…˜ */
      background: linear-gradient(to right, rgba(0,0,0,.12), rgba(0,0,0,0)) !important;
    }
    .lightbox .next{ 
      right: 0 !important;
      left: auto !important;
      border-radius: 8px 0 0 8px !important;
      /* ìš°ì¸¡ì€ ì˜¤ë¥¸ìª½â†’ì™¼ìª½ ë°©í–¥ ê·¸ë¼ë°ì´ì…˜ */
      background: linear-gradient(to left, rgba(0,0,0,.12), rgba(0,0,0,0)) !important;
    }

    /* ëª¨ë°”ì¼ì—ì„œ ìŠ¤íŠ¸ë¦½ ì¡°ê¸ˆ ë” ë„“ê²Œ */
    @media (max-width: 560px){
      .lightbox .prev,
      .lightbox .next{
        width: clamp(56px, 14vw, 96px) !important;
        font-size: clamp(28px, 5.6vw, 42px) !important;
      }
    }

    /* í˜ì´ì €ì™€ ì´ë¯¸ì§€ z-index ì •ë¦¬(í™”ì‚´í‘œ > í˜ì´ì € > ì´ë¯¸ì§€) */
    .lightbox .lb-inner img{ z-index: 1 !important; }
    .lightbox .lb-pager{ z-index: 3 !important; }

    /* =========================
      10) Utilities
      ========================= */
    @media (max-width: 759px){
      .card.center{ background:transparent; box-shadow:none; border-radius:0; padding:0; margin:0; }
    }
    .spark-layer{ position:absolute; inset:0; z-index:2; pointer-events:none; overflow:hidden; }
    .spark-layer canvas{ position:absolute; inset:0; width:100%; height:100%; filter:blur(.4px); }

    /* ì´ë¦„ í•œ ì¤„ ìœ ì§€ & ì¤‘ì•™ ë³´ì • */
    .name-line{
      display:inline-flex; align-items:baseline; justify-content:flex-start; gap:8px; white-space:nowrap;
    }
    .name-line .left-info{ letter-spacing: var(--track, normal); }

    footer{ padding:22px 0 14px; text-align:center; color:var(--muted); font-size:.9rem; }

    /* === Lightbox ë¡œë”© í”„ë¡œê·¸ë ˆìŠ¤ (êµì²´) === */
    .lb-progress{
      position:absolute;
      left:50%; bottom:16px; transform:translateX(-50%);
      display:none; gap:8px; align-items:center;
      padding:8px 10px; border-radius:999px;
      background:rgba(0,0,0,.55); color:#fff;
      border:1px solid rgba(255,255,255,.35);
      backdrop-filter: blur(6px);
      /* ğŸ”§ ì§„í–‰ ì¤‘ì—ë„ í™”ì‚´í‘œ/ì´ë¯¸ì§€ í´ë¦­ ê°€ëŠ¥í•˜ë„ë¡ */
      pointer-events: none;
      /* í™”ì‚´í‘œ(z:6)ë³´ë‹¤ ë‚®ê²Œ, í˜ì´ì €(z:3)ë³´ë‹¤ ì‚´ì§ ë†’ê²Œ */
      z-index:4;
      font-family: var(--font-sans);
    }
    .lb-progress .lb-bar{
      position:relative; width:160px; height:6px; border-radius:999px;
      background: rgba(255,255,255,.18); overflow:hidden; flex:0 0 auto;
    }
    .lb-progress .lb-bar span{
      position:absolute; left:0; top:0; height:100%; width:0%;
      background: linear-gradient(90deg, #ffffff, #ffdfe6);
      border-radius:999px; transition: width .12s linear;
    }
    .lb-progress .lb-pct{
      font-weight:800; font-size:.76rem; min-width:38px; text-align:right;
    }
    @media (max-width:560px){
      .lb-progress{ bottom:12px; }
      .lb-progress .lb-bar{ width:120px; }
    }


  </style>
</head>
<body>

  <header class="wrap">
    <div class="hero">
      <picture>
        <source data-srcset="
          https://mghswedding.github.io/hero-1920.avif 1920w,
          https://mghswedding.github.io/hero-1280.avif 1280w,
          https://mghswedding.github.io/hero-768.avif 768w
        " type="image/avif" sizes="100vw">
        <source data-srcset="
          https://mghswedding.github.io/hero-1920.webp 1920w,
          https://mghswedding.github.io/hero-1280.webp 1280w,
          https://mghswedding.github.io/hero-768.webp 768w
        " type="image/webp" sizes="100vw">
        <img
          class="hero-media"
          src="./KakaoTalk_20250921_234047356.jpg"
          alt=""
          width="1920" height="1080"
          fetchpriority="high" decoding="async">
      </picture>

      <div class="dday-badge" id="ddayTop">D-90</div>
      <div class="spark-layer" id="sparkLayer"></div>
      <!-- === SVG íƒ€ì´í‹€ === -->
      <svg class="hero-svg measuring" viewBox="0 0 1000 600" preserveAspectRatio="xMidYMid slice" aria-hidden="true">
        <defs>
          <!-- ìœ„ìª½ ê³¡ì„  í˜ì´ë“œ ë§ˆìŠ¤í¬ -->
          <radialGradient id="loveGrad" cx="50%" cy="35%" r="75%">
            <stop offset="0%"   stop-color="white"/>
            <stop offset="62%"  stop-color="white"/>
            <stop offset="100%" stop-color="black"/>
          </radialGradient>
          <mask id="heroMask" maskUnits="userSpaceOnUse">
            <rect x="0" y="0" width="1000" height="600" fill="black"/>
            <!-- âœ… ì¢Œìš° ì•ˆì „ ì—¬ë°± 90px â†’ ì‚¬ì§„ ìœ íš¨í­ 820 -->
            <rect x="90" y="0" width="820" height="600" fill="url(#loveGrad)"/>
          </mask>
          <!-- âœ… ë™ì¼í•˜ê²Œ í´ë¦¬í•‘ -->
          <clipPath id="photoClip" clipPathUnits="userSpaceOnUse">
            <rect x="90" y="0" width="820" height="600"/>
          </clipPath>
        </defs>

        <!-- === SVG íƒ€ì´í‹€ (2ì¤„) === -->
        <g class="svg-top fancy" mask="url(#heroMask)" clip-path="url(#photoClip)">
          <!-- ì¤‘ì‹¬(500,460) ê¸°ì¤€ íšŒì „ + ìŠ¤í -->
          <g id="wgmBlock" transform="rotate(-14 500 460) skewX(-6)" data-cx="560">
            <!-- 1ì¤„ -->
            <g class="wgm-row" style="--row-delay:0.3s">
              <!-- ìœ¤ê³½ì„  -->
              <text x="500" y="428" class="stroke wgm-line" data-row="1" style="font-weight:700; font-size:85px;">
                <tspan class="glyph stroke" style="--i:0">w</tspan>
                <tspan class="glyph stroke" style="--i:1">e</tspan>
                <tspan class="glyph stroke" style="--i:2">'</tspan>
                <tspan class="glyph stroke" style="--i:3">r</tspan>
                <tspan class="glyph stroke" style="--i:4">e</tspan>
                <tspan class="glyph stroke" style="--i:5">&#xA0;</tspan>
                <tspan class="glyph stroke" style="--i:6">g</tspan>
                <tspan class="glyph stroke" style="--i:7">e</tspan>
                <tspan class="glyph stroke" style="--i:8">t</tspan>
                <tspan class="glyph stroke" style="--i:9">t</tspan>
                <tspan class="glyph stroke" style="--i:10">i</tspan>
                <tspan class="glyph stroke" style="--i:11">n</tspan>
                <tspan class="glyph stroke" style="--i:12">g</tspan>
              </text>
              <!-- ì±„ì›€ -->
              <text x="500" y="428" class="fill-top wgm-line" data-row="1" style="font-weight:700; font-size:85px;">
                <tspan class="glyph fill" style="--i:0">w</tspan>
                <tspan class="glyph fill" style="--i:1">e</tspan>
                <tspan class="glyph fill" style="--i:2">'</tspan>
                <tspan class="glyph fill" style="--i:3">r</tspan>
                <tspan class="glyph fill" style="--i:4">e</tspan>
                <tspan class="glyph fill" style="--i:5">&#xA0;</tspan>
                <tspan class="glyph fill" style="--i:6">g</tspan>
                <tspan class="glyph fill" style="--i:7">e</tspan>
                <tspan class="glyph fill" style="--i:8">t</tspan>
                <tspan class="glyph fill" style="--i:9">t</tspan>
                <tspan class="glyph fill" style="--i:10">i</tspan>
                <tspan class="glyph fill" style="--i:11">n</tspan>
                <tspan class="glyph fill" style="--i:12">g</tspan>
              </text>
            </g>

            <!-- 2ì¤„ -->
            <g class="wgm-row" style="--row-delay:1.2s">
              <!-- ìœ¤ê³½ì„  -->
              <text x="500" y="476" class="stroke wgm-line" data-row="2" style="font-weight:700; font-size:85px;">
                <tspan class="glyph stroke" style="--i:0">m</tspan>
                <tspan class="glyph stroke" style="--i:1">a</tspan>
                <tspan class="glyph stroke" style="--i:2">r</tspan>
                <tspan class="glyph stroke" style="--i:3">r</tspan>
                <tspan class="glyph stroke" style="--i:4">i</tspan>
                <tspan class="glyph stroke" style="--i:5">e</tspan>
                <tspan class="glyph stroke" style="--i:6">d</tspan>
              </text>
              <!-- ì±„ì›€ -->
              <text x="500" y="476" class="fill-bottom wgm-line" data-row="2" style="font-weight:700; font-size:85px;">
                <tspan class="glyph fill" style="--i:0">m</tspan>
                <tspan class="glyph fill" style="--i:1">a</tspan>
                <tspan class="glyph fill" style="--i:2">r</tspan>
                <tspan class="glyph fill" style="--i:3">r</tspan>
                <tspan class="glyph fill" style="--i:4">i</tspan>
                <tspan class="glyph fill" style="--i:5">e</tspan>
                <tspan class="glyph fill" style="--i:6">d</tspan>
              </text>
            </g>
          </g>
        </g>
        <!-- === /SVG íƒ€ì´í‹€ === -->
      </svg>

      <div class="hero-inner">
        <div class="date-plain" aria-label="ì¼ì‹œì™€ ì¥ì†Œ">
          <span class="d1">2026ë…„ 5ì›” 30ì¼&nbsp;&nbsp;(í† ) ì˜¤í›„ 3ì‹œ 30ë¶„</span>
          <span class="d2">ì±„í”Œì›¨ë”©í™€ ì•„ë²¤í‹°ì›€</span>
        </div>
      </div>
    </div>
  </header>

  <main class="wrap">
    <!-- INVITATION -->
    <section id="invitation" class="card center">
      <h2 class="section-title">INVITATION</h2>
      <p class="small poem">ë´„ì²˜ëŸ¼ í¬ê·¼í•˜ê³  ì—¬ë¦„ì²˜ëŸ¼ ëœ¨ê²ê³ 
ê°€ì„ì²˜ëŸ¼ ì¶©ë§Œí•˜ê³  ê²¨ìš¸ì²˜ëŸ¼ ì„¤ë ˆëŠ”
ì‚¬ëŒì„ ë§Œë‚¬ìŠµë‹ˆë‹¤.
ì´ì œ ì„œë¡œì˜
ëª¨ë“  ê³„ì ˆì„ ì§€ë‚˜ë ¤ í•©ë‹ˆë‹¤.
ê°€ì¥ ë¹›ë‚˜ëŠ” ë‚ , ëŠ˜ ê³ì—ì„œ ì•„ê»´ì¤€
ê³ ë§ˆìš´ ë¶„ë“¤ì„ ì´ˆëŒ€í•©ë‹ˆë‹¤.</p>
      <div class="divider"></div>
      <div class="small inv-rows">
        <!-- 1í–‰: ì‹ ë‘ -->
        <p class="inv-row">
          <span class="muted left-info">ê¹€í˜•ì°¬, ê¹€ì°¨ì—°ì˜ ì•„ë“¤</span>
          <b>ì‹ ë‘ ê¹€ë¯¼ê·œ</b>
        </p>

        <!-- 2í–‰: ì‹ ë¶€ (ì•„ì´ì½˜ì€ ì™¼ìª½ìœ¼ë¡œ ì‚´ì§ íŠ€ì–´ë‚˜ì™€ë„ ë¨) -->
        <p class="inv-row">
          <span class="muted left-info">ìµœë³‘í˜¸, ì •ë™í¬ì˜ ë”¸</span>
            <!-- <span class="icon-chry" aria-hidden="true"> -->
              <!-- SVG ê·¸ëŒ€ë¡œ -->
              <!-- <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" aria-label="êµ­í™”">
                <circle cx="24" cy="24" r="4.5" fill="#ffdf7e"/>
                <g fill="#f2b7c0">
                  <circle cx="24" cy="10" r="5.2"/>
                  <circle cx="36.5" cy="14.5" r="4.8"/>
                  <circle cx="40" cy="26" r="5.4"/>
                  <circle cx="31.5" cy="36" r="5.1"/>
                  <circle cx="16.5" cy="36" r="5.1"/>
                  <circle cx="8" cy="26" r="5.4"/>
                  <circle cx="11.5" cy="14.5" r="4.8"/>
                </g>
                <g fill="#ffd6de" opacity=".95">
                  <circle cx="24" cy="6.5" r="3.2"/>
                  <circle cx="39.5" cy="12" r="3.0"/>
                  <circle cx="42" cy="26" r="3.2"/>
                  <circle cx="33.5" cy="39" r="3.1"/>
                  <circle cx="14.5" cy="39" r="3.1"/>
                  <circle cx="6" cy="26" r="3.2"/>
                  <circle cx="8.5" cy="12" r="3.0"/>
                </g>
              </svg>
            </span> -->
          <b class="bride">ì‹ ë¶€ ìµœí™ì„ </b>
        </p>
      </div>

    </section>

    <!-- ACCOUNT NUMBER (ìƒˆ ë””ìì¸) -->
    <section class="account">
      <h2 class="section-title">ACCOUNT NUMBER</h2>
      <p class="small center muted">ë¶€ë‹´ ê°–ì§€ ì•Šìœ¼ì…”ë„ ë©ë‹ˆë‹¤.<br>í•„ìš”í•˜ì‹  ë¶„ë§Œ ì´ìš©í•´ì£¼ì„¸ìš”.</p>

      <div class="acc-accordion">
        <!-- ì‹ ë‘ì¸¡ -->
        <details id="acc-groom">
          <summary>ì‹ ë‘ì¸¡</summary>
          <div class="acc-rows">
            <!-- ì‹ ë‘ ê³„ì¢Œ -->
            <div class="acc-item">
              <div class="acc-left">
                <p class="acc-title">ì‹ ë‘</p>
                <div class="acc-number">110342241042</div>
                <div class="acc-bank">ì‹ í•œì€í–‰ (ì˜ˆê¸ˆì£¼ : ê¹€ë¯¼ê·œ)</div>
              </div>
              <button class="btn-copy copy" data-copy="110342241042">ë³µì‚¬</button>
            </div>

            <!-- ì‹ ë‘í˜¼ì£¼: ì•„ë²„ì§€ -->
            <!-- <div class="acc-item">
              <div class="acc-left">
                <p class="acc-title">ì‹ ë‘ ì•„ë²„ì§€</p>
                <div class="acc-number">-</div>
                <div class="acc-bank">- (ì˜ˆê¸ˆì£¼ : ê¹€í˜•ì°¬)</div>
              </div>
              <button class="btn-copy copy" data-copy="">ë³µì‚¬</button>
            </div> -->

            <!-- ì‹ ë‘í˜¼ì£¼: ì–´ë¨¸ë‹ˆ -->
            <!-- <div class="acc-item">
              <div class="acc-left">
                <p class="acc-title">ì‹ ë‘ ì–´ë¨¸ë‹ˆ</p>
                <div class="acc-number">-</div>
                <div class="acc-bank">- (ì˜ˆê¸ˆì£¼ : ê¹€ì°¨ì—°)</div>
              </div>
              <button class="btn-copy copy" data-copy="">ë³µì‚¬</button>
            </div> -->
          </div>
        </details>

        <!-- ì‹ ë¶€ì¸¡ -->
        <details id="acc-bride">
          <summary>ì‹ ë¶€ì¸¡</summary>
          <div class="acc-rows">
            <!-- ì‹ ë¶€ ê³„ì¢Œ -->
            <div class="acc-item">
              <div class="acc-left">
                <p class="acc-title">ì‹ ë¶€</p>
                <div class="acc-number">-</div>
                <div class="acc-bank">- (ì˜ˆê¸ˆì£¼ : ìµœí™ì„ )</div>
              </div>
              <button class="btn-copy copy" data-copy="">ë³µì‚¬</button>
            </div>

            <!-- ì‹ ë¶€í˜¼ì£¼: ì•„ë²„ì§€ -->
            <!-- <div class="acc-item">
              <div class="acc-left">
                <p class="acc-title">ì‹ ë¶€ ì•„ë²„ì§€</p>
                <div class="acc-number">-</div>
                <div class="acc-bank">- (ì˜ˆê¸ˆì£¼ : ìµœë³‘í˜¸)</div>
              </div>
              <button class="btn-copy copy" data-copy="">ë³µì‚¬</button>
            </div> -->

            <!-- ì‹ ë¶€í˜¼ì£¼: ì–´ë¨¸ë‹ˆ -->
            <!-- <div class="acc-item">
              <div class="acc-left">
                <p class="acc-title">ì‹ ë¶€ ì–´ë¨¸ë‹ˆ</p>
                <div class="acc-number">-</div>
                <div class="acc-bank">- (ì˜ˆê¸ˆì£¼ : ì •ë™í¬)</div>
              </div>
              <button class="btn-copy copy" data-copy="">ë³µì‚¬</button>
            </div> -->
          </div>
        </details>
      </div>
    </section>


    <!-- D-DAY -->
    <section class="card center" id="dday">
      <h2 class="section-title">D-DAY</h2>
      <p class="small">ë¯¼ê·œ â™¥ í™ì„  ê²°í˜¼ì‹ì´ <b><span id="dtext">90ì¼</span></b> ë‚¨ì•˜ìŠµë‹ˆë‹¤.</p>
      <div class="countdown" role="timer" aria-live="polite">
        <div class="cd-box"><div class="cd-number" id="cd-days">0</div><div class="cd-label">DAYS</div></div>
        <div class="cd-box"><div class="cd-number" id="cd-hours">0</div><div class="cd-label">HOURS</div></div>
        <div class="cd-box"><div class="cd-number" id="cd-mins">0</div><div class="cd-label">MINUTES</div></div>
        <div class="cd-box"><div class="cd-number" id="cd-secs">0</div><div class="cd-label">SECONDS</div></div>
      </div>
    </section>

        <!-- INTERVIEW -->
    <!-- <section class="card interview" id="interview">
      <div class="interview-inner">
        <h3 class="title">INTERVIEW</h3>
        <p class="subtitle">ì„œë¡œë¥¼ ë” ê°€ê¹Œì´</p>

        <p class="inter-q">í•¸ë“œí°ì— ì €ì¥ëœ ì´ë¦„ì€?</p>
        <div class="bubble_container">
          <div class="bubble_box left">
            <p class="name">ë¯¼ê·œ</p>
            <div class="bubble_wrapper"><p class="bubble_text">ì•„ìì°Œë‹ˆ âœ¨</p></div>
          </div>
          <div class="bubble_box right">
            <p class="name">í™ì„ </p>
            <div class="bubble_wrapper"><p class="bubble_text">ë³´ìŠ¤ë¯¸ë‹ˆ ğŸŒŸ</p></div>
          </div>
        </div>

        <p class="inter-q">ì²˜ìŒ ë³¸ ìˆœê°„ ëŠë‚Œì€?</p>
        <div class="bubble_container">
          <div class="bubble_box left">
            <p class="name">ë¯¼ê·œ</p>
            <div class="bubble_wrapper"><p class="bubble_text">í•´ë§‘ê²Œ ì›ƒëŠ” ëª¨ìŠµì´ ì¢‹ì•˜ì–´ ğŸâ˜ºï¸</p></div>
          </div>
          <div class="bubble_box right">
            <p class="name">í™ì„ </p>
            <div class="bubble_wrapper"><p class="bubble_text">ë¶€ë“œëŸ¬ìš´ ë¯¸ì†Œê°€ ì¢‹ì•˜ì–´ â˜€ï¸ğŸ˜Š</p></div>
          </div>
        </div>

        <p class="inter-q">ë‚´ ë§¤ë ¥ í¬ì¸íŠ¸ëŠ”?</p>
        <div class="bubble_container">
          <div class="bubble_box left">
            <p class="name">ë¯¼ê·œ</p>
            <div class="bubble_wrapper"><p class="bubble_text">ì™„ë²½í•œ ì„±ëŒ€ëª¨ì‚¬ ğŸ­ğŸ™ï¸</p></div>
          </div>
          <div class="bubble_box right">
            <p class="name">í™ì„ </p>
            <div class="bubble_wrapper"><p class="bubble_text">ì˜ì˜¥ ë“¤ì–´ê°€ëŠ” ë³´ì¡°ê°œ ğŸ˜Šâœ¨</p></div>
          </div>
        </div>

        <p class="inter-q">ë‚´ê°€ ì œì¼ ì¢‹ì•„í•˜ëŠ” ìŒì‹ì€?</p>
        <div class="bubble_container">
          <div class="bubble_box left">
            <p class="name">ë¯¼ê·œ</p>
            <div class="bubble_wrapper"><p class="bubble_text">ì—„ì²­ ë¹µìˆœì´! ğŸ¥ğŸğŸ¥¨</p></div>
          </div>
          <div class="bubble_box right">
            <p class="name">í™ì„ </p>
            <div class="bubble_wrapper"><p class="bubble_text">ë˜! ë˜!! ë˜!!! ì œìœ¡ ğŸ–ğŸ”¥ğŸš</p></div>
          </div>
        </div>

        <p class="inter-q">10ë…„ ë’¤ ìš°ë¦¬ ëª¨ìŠµì€?</p>
        <div class="bubble_container">
          <div class="bubble_box left">
            <p class="name">ë¯¼ê·œ</p>
            <div class="bubble_wrapper"><p class="bubble_text">ì•„ì´ì™€ í•¨ê»˜ ë³´ë“œê²Œì„ í•˜ê¸° ğŸ²ğŸ§©</p></div>
          </div>
          <div class="bubble_box right">
            <p class="name">í™ì„ </p>
            <div class="bubble_wrapper"><p class="bubble_text">ê°€ì¡± ëª¨ë‘ ìœ ë‹ˆí¼ ì…ê³  ì•¼êµ¬ì¥ ì§ê´€í•˜ê¸° âš¾ï¸ğŸŸï¸</p></div>
          </div>
        </div>
      </div>
    </section> -->

    <!-- GALLERY -->
    <section>
      <h2 class="section-title">GALLERY</h2>
      <p class="small muted center">ì‚¬ì§„ì„ í´ë¦­í•˜ë©´ í¬ê²Œ ë³¼ ìˆ˜ ìˆì–´ìš”.<br>ì¢Œìš° í™”ì‚´í‘œë¡œ ë„˜ê¸¸ ìˆ˜ ìˆì–´ìš”.</p>
      <div class="gallery-wrap card">
        <div class="gallery" id="gallery" tabindex="0" aria-label="ì‹ ë‘ì‹ ë¶€ ê°¤ëŸ¬ë¦¬ (ê°€ë¡œ ìŠ¤í¬ë¡¤)">        
          <!-- base3 -->
          <picture>
            <source data-srcset="
              https://mghswedding.github.io/gallery3-1024.avif 1024w,
              https://mghswedding.github.io/gallery3-768.avif 768w,
              https://mghswedding.github.io/gallery3-512.avif 512w
            " type="image/avif" sizes="(min-width:760px) 33vw, 33vw">
            <source data-srcset="
              https://mghswedding.github.io/gallery3-1024.webp 1024w,
              https://mghswedding.github.io/gallery3-768.webp 768w,
              https://mghswedding.github.io/gallery3-512.webp 512w
            " type="image/webp" sizes="(min-width:760px) 33vw, 33vw">
            <img class="no-save"
                src="./base3.jpg"
                data-full="./base3.jpg"
                alt="0926-00"
                width="1024" height="1365"
                loading="lazy" decoding="async"
                draggable="false" oncontextmenu="return false" draggable="false">
          </picture>

          <!-- base2 -->
          <picture>
            <source data-srcset="
              https://mghswedding.github.io/gallery2-1024.avif 1024w,
              https://mghswedding.github.io/gallery2-768.avif 768w,
              https://mghswedding.github.io/gallery2-512.avif 512w
            " type="image/avif" sizes="(min-width:760px) 33vw, 33vw">
            <source data-srcset="
              https://mghswedding.github.io/gallery2-1024.webp 1024w,
              https://mghswedding.github.io/gallery2-768.webp 768w,
              https://mghswedding.github.io/gallery2-512.webp 512w
            " type="image/webp" sizes="(min-width:760px) 33vw, 33vw">
            <img class="no-save"
                src="./base2.jpg"
                data-full="./base2.jpg"
                alt="0926-00"
                width="1024" height="1365"
                loading="lazy" decoding="async"
                draggable="false" oncontextmenu="return false" draggable="false">
          </picture>

          <!-- base4 -->
          <picture>
            <source data-srcset="
              https://mghswedding.github.io/gallery4-1024.avif 1024w,
              https://mghswedding.github.io/gallery4-768.avif 768w,
              https://mghswedding.github.io/gallery4-512.avif 512w
            " type="image/avif" sizes="(min-width:760px) 33vw, 33vw">
            <source data-srcset="
              https://mghswedding.github.io/gallery4-1024.webp 1024w,
              https://mghswedding.github.io/gallery4-768.webp 768w,
              https://mghswedding.github.io/gallery4-512.webp 512w
            " type="image/webp" sizes="(min-width:760px) 33vw, 33vw">
            <img class="no-save"
                src="./base4.jpg"
                data-full="./base4.jpg"
                alt="0926-00"
                width="1024" height="1365"
                loading="lazy" decoding="async"
                draggable="false" oncontextmenu="return false" draggable="false">
          </picture>
        </div>
      </div>

      <div class="lightbox" id="lightbox" aria-modal="true" role="dialog">
        <div class="lb-inner">
          <div class="prev" id="lbPrev" aria-label="ì´ì „">â€¹</div>
          <img class="no-save" alt="preview" draggable="false" oncontextmenu="return false" draggable="false">
          <div class="next" id="lbNext" aria-label="ë‹¤ìŒ">â€º</div>
          <div class="lb-pager" id="lbPager" aria-live="polite"></div> <!-- âœ… ì¶”ê°€ -->
        </div>
      </div>
    </section>

    <!-- LOCATION -->
    <section>
      <h2 class="section-title">LOCATION</h2>
      <div class="card">
        <p class="center"><b>ì±„í”Œì›¨ë”©í™€ ì•„ë²¤í‹°ì›€</b><br><span class="small muted">ì„œìš¸ ì¤‘êµ¬ ì²­íŒŒë¡œ 464 3ì¸µ</span></p>
        <div id="map" class="map" role="img" aria-label="ì˜ˆì‹ì¥ ì§€ë„"></div>
        <div class="navi">
          <!-- todo -->
          <a class="btn ghost" target="_blank"
            href="https://kko.to/DSxjVjo89i"
            rel="noopener">ì¹´ì¹´ì˜¤ë§µ</a>
          <a class="btn ghost" target="_blank"
            href="https://naver.me/FV7Yg9qI"
            rel="noopener">ë„¤ì´ë²„ì§€ë„</a>
          <a class="btn ghost" target="_blank"
            href="https://maps.app.goo.gl/owXKfyyGXSPrQtTc8"
            rel="noopener">êµ¬ê¸€ì§€ë„</a>
        </div>
      </div>
    </section>

    <!-- TRANSPORTATION -->
    <section>
      <h2 class="section-title">TRANSPORTATION</h2>
      <div class="card small">

        <p class="row"><b>ğŸš— ìê°€ìš© ì´ìš© ì‹œ</b></p>
        <ul style="margin:6px 0 14px 0; padding-left:18px; line-height:1.5">
          <li>
            ë‚´ë¹„ê²Œì´ì…˜ì— <b>ì±„í”Œì›¨ë”©í™€ ì•„ë²¤í‹°ì›€</b> ê²€ìƒ‰
          </li>
        </ul>
        <!-- todo -->
        <p class="row"><b>ğŸ…¿ï¸ ì£¼ì°¨</b></p>
        <ul style="margin:6px 0 14px 0; padding-left:18px; line-height:1.5">
          <li>
            ë³¸ê´€ ì£¼ì°¨ì¥(ë¸Œë¼ìš´ìŠ¤í†¤ì„œìš¸),
          </li>
          <li>
            ë³„ê´€ ì£¼ì°¨ì¥(ì„œì†Œë¬¸ ì„±ì§€ ì—­ì‚¬ ë°•ë¬¼ê´€)
          </li>
        </ul>

        <!-- todo -->
        <p class="row"><b>ğŸš‡ ì§€í•˜ì²  ì´ìš© ì‹œ</b></p>
        <ul style="margin:6px 0 14px 0; padding-left:18px; line-height:1.5">
          <li><b>2í˜¸ì„  ì¶©ì •ë¡œì—­ </b> í•˜ì°¨</li>
          <li>4ë²ˆ ì¶œêµ¬ì—ì„œ ë„ë³´ 10ë¶„ ì´ë™</li>
        </ul>


      </div>
    </section>

    <!-- ETC -->
    <!-- todo -->
    <section>
      <h2 class="section-title">ETC</h2>
      <div class="card small">
        <p style="margin:6px 0 14px 0; line-height:1.5">
          ğŸ½ï¸ <b>ì—°íšŒì¥ ì´ìš©ì‹œê°„</b> : 15:30 ~ 17:30
        </p>
      </div>
    </section>


    <!-- ICS / ìº˜ë¦°ë” ë²„íŠ¼ -->
    <section class="center" style="margin-top:12px">
      <div class="btns" style="justify-content:center">
        <a class="btn" id="btnAppleSamsung" href="#">ì•„ì´í°/ì‚¼ì„± ìº˜ë¦°ë”ë¡œ ì¶”ê°€</a>
        <a class="btn ghost" id="btnGoogle" target="_blank" rel="noopener">êµ¬ê¸€ ìº˜ë¦°ë”ë¡œ ì—´ê¸°</a>
      </div>
      <p class="small muted" style="margin-top:6px">
        ë‹¤ìš´ë¡œë“œê°€ ìë™ìœ¼ë¡œ ì‹œì‘ë˜ì§€ ì•Šìœ¼ë©´<br>
        <a id="btnIcsDownload" href="https://mghswedding.github.io/mingyu-hongseon-wedding-2026-05-30.ics" download="mingyu-hongseon-wedding-2026-05-30.ics">ICS íŒŒì¼ ì§ì ‘ ë‹¤ìš´ë¡œë“œ</a>
      </p>
      <p class="small muted" id="dlHint" style="margin-top:4px; display:none"></p>
    </section>

  </main>

  <footer>
    <div class="wrap small">
      Â© 2026 MINGYU â™¥ HONGSEON
    </div>
  </footer>

  <script>
    // ì‚¬ì§„ ì•ˆìª½ ìœ íš¨í­(= viewBox 1000ì—ì„œ ì¢Œìš° 90ì”© ì œì™¸) + 1ì¤„ ìŠ¤ì¼€ì¼ì— 2ì¤„ ë¹„ë¡€ ì ìš©
    // ì‚¬ì§„ ì•ˆìª½ ìœ íš¨í­(= 1000 - 90*2) ê¸°ì¤€ ì •ë ¬/ìŠ¤ì¼€ì¼
    function fitHeroTwoLines() {
      const svg = document.querySelector('.hero-svg');
      if (!svg) return;

      const vb = svg.viewBox.baseVal;         // 1000 x 600
      const PADDING = 90;                      // ì¢Œ/ìš° ì•ˆì „ ì—¬ë°± (clip/maskì™€ ë™ì¼)
      const usableW = vb.width - PADDING * 2;  // 820

      const block = svg.querySelector('#wgmBlock');
      const cx = block && block.dataset.cx ? parseFloat(block.dataset.cx) : 500;

      const line1 = svg.querySelectorAll('.wgm-line[data-row="1"]');
      const line2 = svg.querySelectorAll('.wgm-line[data-row="2"]');
      if (!line1.length || !line2.length) return;

      const alreadyDone = svg.classList.contains('done');
      const oldBlockTransform = block.getAttribute('transform') || '';

      // âœ… ëë‚œ ë’¤ì—ëŠ” ì¸¡ì •ìš© í´ë˜ìŠ¤ í† ê¸€ì„ ê±´ë“œë¦¬ì§€ ì•Šì•„ ì¬ì• ë‹ˆ ë°©ì§€
      block.setAttribute('transform', '');

      // 1) ìì—° ìƒíƒœë¡œ í­ ì¸¡ì •
      [...line1, ...line2].forEach(t => t.removeAttribute('transform'));
      const naturalW1 = Math.max(1, line1[0].getBBox().width);

      // 2) 1ì¤„ ê¸°ì¤€ ë°°ìœ¨(ì‚¬ì§„ ìœ íš¨í­ì— ë§ì¶¤, í‚¤ìš°ì§„ ì•ŠìŒ)
      const scale1 = Math.min(1, usableW / naturalW1);

      // 3) ê³µí†µ ì ìš© (í‰í‰í•œ ì¢Œí‘œê³„ì—ì„œ ê³„ì‚°)
      function applyToLine(nodeList, scale){
        nodeList.forEach(t=>{
          const b = t.getBBox();
          const center = b.x + b.width / 2;
          const nudge = parseFloat(t.getAttribute('data-dx') || '0');
          const tx = (cx - center * scale) + nudge;
          t.setAttribute('transform', `translate(${tx},0) scale(${scale},1)`);
          t.setAttribute('text-anchor', 'middle');
        });
      }
      applyToLine(line1, scale1);
      applyToLine(line2, scale1);

      // 4) ë¶€ëª¨ ë³€í˜• ì›ë³µ + measuring ì²˜ë¦¬
      if (oldBlockTransform) block.setAttribute('transform', oldBlockTransform);
      else block.removeAttribute('transform');

      if (!alreadyDone) svg.classList.remove('measuring');

      // í‘œì‹œ + iOS ê°•ì œ ë¦¬í”Œë¡œìš°ë¡œ ìœ„ì¹˜ ê¹œë¹¡ì„ ë°©ì§€
      svg.classList.add('wgm-ready');
      void svg.offsetWidth;
    }

    // â¬‡ï¸ iOS ëŒ€ì‘: resize ë””ë°”ìš´ìŠ¤(+ orientationchange, pageshow) â€” ì£¼ì†Œì°½ ì• ë‹ˆ ì¤‘ ì˜ëª»ëœ í­ìœ¼ë¡œ ì¬ê³„ì‚°ë˜ëŠ” ê²ƒ ë°©ì§€
    (function(){
      let timer, rafId;
      const onStableResize = () => {
        clearTimeout(timer);
        timer = setTimeout(() => {
          if (rafId) cancelAnimationFrame(rafId);
          rafId = requestAnimationFrame(() => fitHeroTwoLines());
        }, 150); // 100~200ms ê¶Œì¥
      };
      window.addEventListener('resize', onStableResize, { passive: true });
      window.addEventListener('orientationchange', onStableResize, { passive: true });
      window.addEventListener('pageshow', () => setTimeout(fitHeroTwoLines, 0)); // bfcache ë³µê·€ ì‹œ
    })();

    document.addEventListener('DOMContentLoaded', () => {
      
      /* prodì—ì„œ webp/avif srcset í™œì„±í™” + í”„ë¦¬ë¡œë“œ */
      const isProd = location.hostname === 'mghswedding.github.io';
      if (isProd) {
        document.querySelectorAll('source[data-srcset]').forEach(s => {
          s.setAttribute('srcset', s.getAttribute('data-srcset'));
        });
        const l = document.createElement('link');
        l.rel = 'preload'; l.as = 'image';
        l.href = 'https://mghswedding.github.io/hero-1280.webp';
        l.setAttribute('imagesrcset', 'https://mghswedding.github.io/hero-768.webp 768w, https://mghswedding.github.io/hero-1280.webp 1280w, https://mghswedding.github.io/hero-1920.webp 1920w');
        l.setAttribute('imagesizes', '100vw');
        document.head.appendChild(l);
      }

      /* ì¸í„°ë·° reveal (ë°˜ë³µ ì¬ìƒ + ìŠ¤íƒœê±°) */
      (function setupInterviewRevealRepeat(){
        const block = document.getElementById('interview');
        if(!block) return;

        const qs     = [...block.querySelectorAll('.inter-q')];
        const groups = [...block.querySelectorAll('.bubble_container')];

        // ì§ˆë¬¸ íƒ€ì´í‹€: ë·°í¬íŠ¸ in/out ì— ë”°ë¼ í† ê¸€(ë°˜ë³µ)
        const ioQ = new IntersectionObserver((ents)=>{
          ents.forEach(e=>{
            if(e.isIntersecting){
              e.target.classList.remove('show');
              void e.target.offsetWidth; // reflowë¡œ ì• ë‹ˆ ì´ˆê¸°í™”
              e.target.classList.add('show');
            }else{
              e.target.classList.remove('show');
            }
          });
        }, { threshold: 0.35, rootMargin: '0px 0px -8% 0px' });
        qs.forEach(q=> ioQ.observe(q));

        // ë§í’ì„  ê·¸ë£¹: ìŠ¤íƒœê±° + ë°˜ë³µ
        const ioB = new IntersectionObserver((ents)=>{
          ents.forEach(e=>{
            const boxes = [...e.target.querySelectorAll('.bubble_box')];
            if(e.isIntersecting){
              boxes.forEach((box,i)=>{
                box.style.setProperty('--delay', `${i*120}ms`);
                box.classList.remove('show');
                void box.offsetWidth;
                box.classList.add('show');
              });
            }else{
              boxes.forEach(box=> box.classList.remove('show'));
            }
          });
        }, { threshold: 0.35, rootMargin: '0px 0px -8% 0px' });
        groups.forEach(g=> ioB.observe(g));
      })();

      /* D-DAY */
      const target = new Date("2026-05-30T15:30:00+09:00").getTime();
      const dtext  = document.getElementById('dtext');
      const el = {
        d: document.getElementById('cd-days'),
        h: document.getElementById('cd-hours'),
        m: document.getElementById('cd-mins'),
        s: document.getElementById('cd-secs'),
      };
      function refreshDday(diffMs){
        const sec = Math.floor(diffMs/1000);
        const d = Math.floor(sec/86400);
        const h = Math.floor((sec%86400)/3600);
        const m = Math.floor((sec%3600)/60);
        const s = sec%60;
        el.d.textContent = d; el.h.textContent = h; el.m.textContent = m; el.s.textContent = s;
        if (dtext) dtext.textContent = d + "ì¼";
        const top = document.getElementById('ddayTop');
        if (top) top.textContent = "D-" + d;
      }
      function tick(){ const now = Date.now(); let diff = Math.max(0, target - now); refreshDday(diff); }
      tick(); setInterval(tick, 1000);

      /* ë³µì‚¬ ë²„íŠ¼ (ì „ì—­: .copy) */
      document.addEventListener('click', (e)=>{
        const btn = e.target.closest('.copy');
        if(!btn) return;
        const text = btn.dataset.copy || btn.textContent.trim();
        navigator.clipboard.writeText(text).then(()=>{
          if (!btn.dataset.old) btn.dataset.old = btn.textContent;
          btn.textContent = 'ë³µì‚¬ë¨';
          setTimeout(()=>{ btn.textContent = btn.dataset.old || text; delete btn.dataset.old; }, 1200);
        });
      });

      /* ë¼ì´íŠ¸ë°•ìŠ¤ */
       // í•œ ë²ˆë§Œ ë°”ì¸ë”©ë˜ë„ë¡ ê°€ë“œ
      const FullImageCache = new Map(); // url -> Promise<void>

      function allowAggressivePrefetch(){
        const c = navigator.connection || {};
        if (c.saveData) return false;
        const fast = ['4g','5g'].includes(c.effectiveType);
        return fast || !c.effectiveType; // ë¯¸ì§€ì›ì´ë©´ ì¼ë‹¨ í—ˆìš©
      }

      function preloadFull(url){
        if (!url) return Promise.resolve();
        if (FullImageCache.has(url)) return FullImageCache.get(url);

        const p = new Promise((resolve)=>{
          // <link rel=prefetch> : ë„¤íŠ¸ì›Œí¬ íŒíŠ¸
          try{
            const l = document.createElement('link');
            l.rel = 'prefetch';
            l.as  = 'image';
            l.href = url;
            document.head.appendChild(l);
          }catch(_){}

          // Image ê°ì²´ë¡œ ì‹¤ì œ ë‹¤ìš´ë¡œë“œ + ë””ì½”ë”© ì˜ˆì•½
          const im = new Image();
          im.decoding = 'async';
          im.onload = async ()=> { try { await im.decode(); } catch(_) {} ; resolve(); };
          im.onerror = ()=> resolve(); // ì‹¤íŒ¨í•´ë„ ë§‰ì§€ ì•ŠìŒ
          im.src = url;
        });

        FullImageCache.set(url, p);
        return p;
      }

      // ì£¼ë³€ ì¸ë±ìŠ¤ ì›ë³¸ ì„ ë¡œë”©
      function prefetchAroundIndex(index, span=2){
        const list = document.querySelectorAll('#gallery picture img');
        const total = list.length;
        if (!total) return;

        const targets = new Set();
        for (let d=0; d<=span; d++){
          const a = (index + d) % total;
          const b = (index - d + total) % total;
          [a,b].forEach(i=>{
            const img = list[i];
            const full = img?.getAttribute('data-full');
            if (full) targets.add(full);
          });
        }
        targets.forEach(url=> preloadFull(url));
      }

      /* ===== ë¼ì´íŠ¸ë°•ìŠ¤ + ìºì‹œ/ì„ ë¡œë”© ì—…ê·¸ë ˆì´ë“œ (êµì²´) ===== */
      (function setupLightboxWithCaching(){
        if (window.__lbInitV2) return;  // ì¤‘ë³µ ë°©ì§€
        window.__lbInitV2 = true;

        const lb      = document.getElementById('lightbox');
        const lbImg   = lb?.querySelector('img');
        const prevBtn = document.getElementById('lbPrev');
        const nextBtn = document.getElementById('lbNext');
        const pager   = document.getElementById('lbPager');

        /* ---------- í™˜ê²½/ë„ìš°ë¯¸ ---------- */
        const thumbs = Array.from(document.querySelectorAll('#gallery picture img'));
        const total  = thumbs.length;
        let idx = 0;
        let touchStartX = 0;

        // ì§„í–‰ë°” ì—˜ë¦¬ë¨¼íŠ¸ (ì—†ìœ¼ë©´ ìƒì„±)
        let prog = lb?.querySelector('.lb-progress');
        if (!prog && lb) {
          const inner = lb.querySelector('.lb-inner');
          prog = document.createElement('div');
          prog.className = 'lb-progress';
          prog.innerHTML = `
            <div class="lb-bar" aria-hidden="true"><span></span></div>
            <div class="lb-pct" aria-live="polite">0%</div>
          `;
          inner.appendChild(prog);
        }
        const bar = prog?.querySelector('.lb-bar span');
        const pct = prog?.querySelector('.lb-pct');
        const showProgress = () => { if (prog) { prog.style.display = 'flex'; setProgress(0); } };
        const hideProgress = () => { if (prog) prog.style.display = 'none'; };
        const setProgress  = (v) => {
          if (!bar || !pct) return;
          const p = Math.max(0, Math.min(100, Math.round(v)));
          bar.style.width = p + '%';
          pct.textContent = p + '%';
        };

        // ë„¤íŠ¸ì›Œí¬ ìŠ¤íƒ
        function allowAggressivePrefetch(){
          const c = navigator.connection || {};
          if (c.saveData) return false;
          const fast = ['4g','5g'].includes(c.effectiveType);
          return fast || !c.effectiveType; // ë¯¸ì§€ì›ì´ë©´ ì¼ë‹¨ í—ˆìš©
        }

        /* ---------- ìºì‹œ ê³„ì¸µ ----------
          1) ë©”ëª¨ë¦¬ LRU (ê°€ì¥ ë¹ ë¦„, ì„¸ì…˜ ë‚´ ì¦‰ì‹œ í‘œì‹œ)
          2) Cache Storage (origin ë‹¨ìœ„ ì˜ì† ìºì‹œ)
        --------------------------------- */

        // 1) ë©”ëª¨ë¦¬ LRU(Blob) + ì¦‰ì‹œ ì“¸ objectURL
        const MAX_MEM_ITEMS = 20;  // í•„ìš”ì‹œ ì¡°ì ˆ
        const memMap = new Map();  // url -> { blob, objUrl }
        function memHas(url){ return memMap.has(url); }
        function memGet(url){
          const v = memMap.get(url);
          if (!v) return null;
          // LRU ê°±ì‹ 
          memMap.delete(url); memMap.set(url, v);
          return v;
        }
        function memPut(url, blob){
          // ê¸°ì¡´ objUrl ì •ë¦¬
          const old = memMap.get(url);
          if (old?.objUrl) URL.revokeObjectURL(old.objUrl);
          const objUrl = URL.createObjectURL(blob);
          memMap.set(url, { blob, objUrl });
          // LRU íŠ¸ë¦¬ë°
          while (memMap.size > MAX_MEM_ITEMS){
            const [k, val] = memMap.entries().next().value;
            if (val?.objUrl) URL.revokeObjectURL(val.objUrl);
            memMap.delete(k);
          }
        }

        // 2) Cache Storage
        const CACHE_NAME = 'lb-full-img-v1';
        async function cacheMatch(url){
          try {
            const c = await caches.open(CACHE_NAME);
            return await c.match(url);
          } catch(_) { return null; }
        }
        async function cachePut(url, resp){
          try {
            const c = await caches.open(CACHE_NAME);
            await c.put(url, resp.clone());
          } catch(_) {}
        }

        /* ---------- ì§„í–‰ ì¤‘ ìš”ì²­ ì·¨ì†Œ í† í° ---------- */
        let currentLoad = { controller: null, token: 0 };

        /* ---------- ìœ í‹¸ ---------- */
        function totalCount(){ return total; }
        function updatePager(){ if (pager) pager.textContent = `${idx + 1} / ${totalCount()}`; }

        // ì£¼ë³€ ì¸ë±ìŠ¤ ì›ë³¸ë“¤
        function surroundingFullUrls(center, span=2){
          const urls = [];
          for (let d=0; d<=span; d++){
            const a = (center + d + total) % total;
            const b = (center - d + total) % total;
            [a,b].forEach(i=>{
              const url = thumbs[i]?.getAttribute('data-full');
              if (url && !urls.includes(url)) urls.push(url);
            });
          }
          return urls;
        }

        /* ---------- í•µì‹¬: ì›ë³¸ ë¡œë“œ(ì§„í–‰ë¥ /ìºì‹œ ë°˜ì˜) ---------- */
        async function loadWithProgress(url){
          if (!url || !lbImg) return;

          // ì§„í–‰ ì¤‘ ìš”ì²­ ì¤‘ë‹¨
          if (currentLoad.controller) { try { currentLoad.controller.abort(); } catch(_) {} }
          const token = ++currentLoad.token;
          const controller = new AbortController();
          currentLoad.controller = controller;

          // ë©”ëª¨ë¦¬ LRU ì¦‰ì‹œ íˆíŠ¸
          const mem = memGet(url);
          if (mem){
            lbImg.src = mem.objUrl;
            try { await lbImg.decode?.(); } catch(_){}
            // ë©”ëª¨ë¦¬ íˆíŠ¸ëŠ” ì§„í–‰ë°” í‘œì‹œ ì•ˆ í•¨
            return;
          }

          // CacheStorage íˆíŠ¸
          const cacheResp = await cacheMatch(url);
          if (cacheResp){
            const blob = await cacheResp.blob();
            memPut(url, blob);
            lbImg.src = memGet(url).objUrl;
            try { await lbImg.decode?.(); } catch(_){}
            return;
          }

          // ë„¤íŠ¸ì›Œí¬ ë‹¨ê³„ë§Œ ì§„í–‰ë°” í‘œì‹œ
          showProgress();
          const set = (v) => setProgress(Math.min(99, v)); // ë„¤íŠ¸ì›Œí¬ ë‹¨ê³„ì—ì„œëŠ” 99%ë¥¼ ë„˜ì§€ ì•Šê²Œ
          try {
            const resp = await fetch(url, { signal: controller.signal, cache: 'force-cache' });
            if (!resp.ok) throw new Error('HTTP '+resp.status);

            const total = Number(resp.headers.get('content-length') || 0);
            const hasLen = Number.isFinite(total) && total > 0;

            if (resp.body?.getReader){
              const reader = resp.body.getReader();
              const chunks = [];
              let loaded = 0;

              while (true){
                const { done, value } = await reader.read();
                if (done) break;
                chunks.push(value); loaded += value.byteLength;

                if (token !== currentLoad.token) return; // ì¤‘ê°„ ì·¨ì†Œë˜ë©´ ì¢…ë£Œ

                if (hasLen){
                  const pct = (loaded / total) * 90; // ì „ì†¡ì€ ìµœëŒ€ 90%
                  set(pct);
                } else {
                  // content-length ì—†ìœ¼ë©´ 40â†’88% ì‚¬ì´ ë¡œê¹… ê¸°ë°˜ ê°€ì§œ ì§„í–‰
                  const pseudo = Math.min(88, 40 + Math.log10(1 + loaded / 4096) * 30);
                  set(pseudo);
                }
              }

              // ì „ì†¡ ì™„ë£Œ â†’ Blob ìƒì„±
              const blob = new Blob(chunks, { type: resp.headers.get('content-type') || 'image/jpeg' });
              if (token !== currentLoad.token) return;

              // 95%: êµì²´ ì§ì „
              setProgress(95);

              // ë©”ëª¨ë¦¬/LRUì— ë„£ê³  êµì²´
              memPut(url, blob);
              const { objUrl } = memGet(url);
              lbImg.src = objUrl;

              // ë””ì½”ë”© ëŒ€ê¸°(ë””ì½”ë”©ì´ ê¸¸ë©´ ì²´ê°ìƒ 'ë©ˆì¶˜ ê²ƒ'ì²˜ëŸ¼ ë³´ì´ë˜ ë¬¸ì œ í•´ê²°)
              try { await lbImg.decode?.(); } catch(_){}

              // 100% â†’ ì‚´ì§ ì§€ì—° í›„ ìˆ¨ê¹€
              setProgress(100);
              setTimeout(hideProgress, 120);

              // CacheStorageì—ë„ ë„£ì–´ ë‹¤ìŒ ì„¸ì…˜ ê°€ì†
              cachePut(url, new Response(blob, { headers: { 'Content-Type': blob.type }}));

            } else {
              // ìŠ¤íŠ¸ë¦¼ ë¯¸ì§€ì› í´ë°±: 60% â†’ 95% â†’ decode ì™„ë£Œ í›„ 100%
              setProgress(60);
              await new Promise((resolve, reject) => {
                const im = new Image();
                im.onload = resolve; im.onerror = reject; im.src = url;
              });
              if (token !== currentLoad.token) return;

              setProgress(95);
              lbImg.src = url;
              try { await lbImg.decode?.(); } catch(_){}
              setProgress(100);
              setTimeout(hideProgress, 120);

              // ë°±ê·¸ë¼ìš´ë“œ ìºì‹œ ì±„ìš°ê¸°
              fetch(url).then(r=> r.ok && cachePut(url, r)).catch(()=>{});
            }
          } catch(e){
            if (e.name !== 'AbortError') console.warn('ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨:', e);
            hideProgress();
          }
        }


        /* ---------- ì—´ê¸°/ë‹«ê¸°/ì´ë™ ---------- */
        function openAt(i){
          if (!lb || !lbImg || !total) return;
          idx = (i + total) % total;

          const t        = thumbs[idx];
          const full     = t.getAttribute('data-full');
          const thumbSrc = t.currentSrc || t.src;

          try { lbImg.fetchPriority = 'high'; } catch(_) {}
          lbImg.src = thumbSrc;     // ì¸ë„¤ì¼ ì¦‰ì‹œ

          lb.classList.add('open');
          updatePager();

          // ê·¼ì²˜ëŠ” ë°”ë¡œ ì„ ë¡œë”©
          queuePrefetch(surroundingFullUrls(idx, 2));
          if (allowAggressivePrefetch()) {
            (window.requestIdleCallback || setTimeout)(() => queuePrefetch(surroundingFullUrls(idx, 4)), { timeout: 1200 });
          }

          // ì›ë³¸ êµì²´ ì‹œë„(ìºì‹œ/ë©”ëª¨ë¦¬ â†’ ë„¤íŠ¸ì›Œí¬)
          if (full) loadWithProgress(full);
          else hideProgress();
        }
        function closeLb(){
          if (!lb || !lbImg) return;
          lb.classList.remove('open');
          lbImg.src = '';
          if (pager) pager.textContent = '';
          hideProgress();
          if (currentLoad.controller) { try { currentLoad.controller.abort(); } catch(_) {} }
        }
        function next(){ openAt(idx + 1); }
        function prev(){ openAt(idx - 1); }

        // ì¸ë„¤ì¼ í´ë¦­ â†’ ì—´ê¸°
        thumbs.forEach((img, i) => {
          img.addEventListener('click', () => openAt(i), { passive: true });
        });

        // ë°°ê²½ í´ë¦­ â†’ ë‹«ê¸°
        lb?.addEventListener('click', (e) => { if (e.target === lb) closeLb(); });

        // ESC/í™”ì‚´í‘œ
        document.addEventListener('keydown', (e) => {
          if (!lb?.classList.contains('open')) return;
          if (e.key === 'Escape') closeLb();
          else if (e.key === 'ArrowRight') next();
          else if (e.key === 'ArrowLeft')  prev();
        });

        // ë²„íŠ¼
        prevBtn?.addEventListener('click', (e) => { e.stopPropagation(); prev(); });
        nextBtn?.addEventListener('click', (e) => { e.stopPropagation(); next(); });

        // ìŠ¤ì™€ì´í”„
        lbImg?.addEventListener('touchstart', (e) => { touchStartX = e.changedTouches[0].clientX; }, { passive: true });
        lbImg?.addEventListener('touchend',   (e) => {
          const dx = e.changedTouches[0].clientX - touchStartX;
          if (Math.abs(dx) > 40) (dx < 0 ? next() : prev());
        }, { passive: true });

        // ì €ì¥ ë°©ì§€(ì„ íƒ)
        document.addEventListener('contextmenu', (e) => {
          if (e.target.closest('#gallery') || e.target.closest('#lightbox')) e.preventDefault();
        });

        /* ---------- ë°±ê·¸ë¼ìš´ë“œ ì„ ë¡œë”© í ---------- */
        const prefetchQueue = [];
        let prefetching = 0;
        const MAX_CONCURRENCY = 2;

        function enqueue(url){
          if (!url) return;
          // ì´ë¯¸ ë©”ëª¨ë¦¬/í/ìºì‹œì— ìˆìœ¼ë©´ ê±´ë„ˆëœ€
          if (memHas(url) || prefetchQueue.includes(url)) return;
          prefetchQueue.push(url);
          pump();
        }

        function queuePrefetch(urls){
          urls.forEach(u => enqueue(u));
        }

        async function pump(){
          if (prefetching >= MAX_CONCURRENCY) return;
          const url = prefetchQueue.shift();
          if (!url) return;

          prefetching++;
          try {
            // ìºì‹œì— ì´ë¯¸ ìˆë‚˜ í™•ì¸
            if (await cacheMatch(url)) return;
            // ì¡°ìš©íˆ ë‹¤ìš´ë¡œë“œ â†’ ë””ì½”ë“œ â†’ ë©”ëª¨ë¦¬/ìºì‹œì— ì €ì¥
            const resp = await fetch(url, { cache: 'force-cache' });
            if (resp.ok){
              const blob = await resp.clone().blob();
              // decode íŒíŠ¸ (ë¸Œë¼ìš°ì €ì— ë”°ë¼ íš¨ê³¼ ì—†ìŒ)
              try { await createImageBitmap(blob); } catch(_){}
              memPut(url, blob);
              cachePut(url, resp);
            }
          } catch(_){}
          finally{
            prefetching--;
            // ì•„ì´ë“¤ ë•Œ ê³„ì† ì§„í–‰
            if ('requestIdleCallback' in window){
              requestIdleCallback(() => pump(), { timeout: 1500 });
            } else {
              setTimeout(pump, 50);
            }
          }
        }

        // ì´ˆê¸°: ì²« 3~4ì¥ ì¦‰ì‹œ ì›Œë°ì—… + ë‚˜ë¨¸ì§€ëŠ” ì•„ì´ë“¤ ì‹œê°„ì—
        (function warmup(){
          const first = Math.min(total, 4);
          for (let i=0; i<first; i++){
            const full = thumbs[i].getAttribute('data-full');
            enqueue(full);
          }
          if (allowAggressivePrefetch()){
            const rest = thumbs.slice(first).map(im => im.getAttribute('data-full')).filter(Boolean);
            (window.requestIdleCallback || setTimeout)(() => queuePrefetch(rest), { timeout: 2000 });
          }
        })();

      })();


      /* ìº˜ë¦°ë” */
      (function(){
        const title = 'ë¯¼ê·œ â™¥ í™ì„  ê²°í˜¼ì‹';
        const locationTxt = 'ì±„í”Œì›¨ë”©í™€ ì•„ë²¤í‹°ì›€, ì„œìš¸ ì¤‘êµ¬ ì²­íŒŒë¡œ 464 3ì¸µ';
        const details = 'ë¯¼ê·œ â™¥ í™ì„  ê²°í˜¼ì‹';
        const dtStartZ = '20260530T063000Z';
        const dtEndZ   = '20260530T083000Z';

        const isProd = location.hostname === 'mghswedding.github.io';
        const icsUrl = isProd ? 'https://mghswedding.github.io/mingyu-hongseon-wedding-2026-05-30.ics' : '';

        const ics = `BEGIN:VCALENDAR
  VERSION:2.0
  PRODID:-//Wedding Invite//KR
  CALSCALE:GREGORIAN
  METHOD:PUBLISH
  BEGIN:VEVENT
  UID:wedding-mingyu-hongseon-20260530@example
  SUMMARY:${title}
  LOCATION:${locationTxt}
  DESCRIPTION:${details}
  DTSTART:${dtStartZ}
  DTEND:${dtEndZ}
  END:VEVENT
  END:VCALENDAR`;

        const btnAppleSamsung = document.getElementById('btnAppleSamsung');
        const btnGoogle       = document.getElementById('btnGoogle');
        const btnIcsDownload  = document.getElementById('btnIcsDownload');
        const dlHint          = document.getElementById('dlHint');

        const gcalParams = new URLSearchParams({
          action:'TEMPLATE', text:title, details, location:locationTxt, dates:`${dtStartZ}/${dtEndZ}`
        });
        const gcalUrl = `https://calendar.google.com/calendar/render?${gcalParams.toString()}`;
        if (btnGoogle) btnGoogle.href = gcalUrl;

        (function setDownloadLink(){
          if (!btnIcsDownload) return;
          if (isProd && icsUrl){
            btnIcsDownload.href = icsUrl;
            btnIcsDownload.setAttribute('download','mingyu-hongseon-wedding-2026-05-30.ics');
          } else {
            try{
              const blob = new Blob([ics], { type:'text/calendar;charset=utf-8' });
              const blobUrl = URL.createObjectURL(blob);
              btnIcsDownload.href = blobUrl;
              btnIcsDownload.setAttribute('download','mingyu-hongseon-wedding-2026-05-30.ics');
            }catch(_){}
          }
        })();

        function openHostedICS(){ if (!icsUrl) return false; window.open(icsUrl, '_blank'); return true; }
        function openIcsLocal(){
          try{
            const blob = new Blob([ics], { type:'text/calendar;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            window.open(url, '_blank');
            setTimeout(()=> URL.revokeObjectURL(url), 10000);
          }catch(_){}
        }

        if (btnAppleSamsung){
          btnAppleSamsung.addEventListener('click', (e)=>{
            e.preventDefault();
            const ua = navigator.userAgent || '';
            const isAndroid = /Android/i.test(ua);
            const isKakao   = /KAKAOTALK/i.test(ua);

            if (isProd && icsUrl){
              openHostedICS();
              if (isAndroid){
                const msg = isKakao
                  ? 'ë‹¤ìš´ë¡œë“œê°€ ì‹œì‘ë˜ê±°ë‚˜ ìƒˆ ì°½ì´ ì—´ë¦½ë‹ˆë‹¤. ì¹´ì¹´ì˜¤í†¡ ìš°ì¸¡ ìƒë‹¨(â‹®) â†’ ë‹¤ìš´ë¡œë“œ ê´€ë¦¬ì—ì„œ .ics íŒŒì¼ì„ íƒ­í•´ ì£¼ì„¸ìš”.'
                  : 'ë‹¤ìš´ë¡œë“œê°€ ì‹œì‘ë˜ê±°ë‚˜ ìƒˆ ì°½ì´ ì—´ë¦½ë‹ˆë‹¤. ì•Œë¦¼ ë˜ëŠ” ë‚´ íŒŒì¼ > Downloadì—ì„œ .ics íŒŒì¼ì„ íƒ­í•´ ì£¼ì„¸ìš”.';
                const tip = document.createElement('div');
                tip.textContent = msg;
                tip.style.cssText = 'position:fixed;left:50%;bottom:22px;transform:translateX(-50%);background:rgba(0,0,0,.85);color:#fff;padding:10px 12px;border-radius:10px;font-size:12px;z-index:9999;max-width:92vw;text-align:center;white-space:pre-line';
                document.body.appendChild(tip);
                setTimeout(()=> tip.remove(), 4200);
                if (dlHint){
                  dlHint.style.display='block';
                  dlHint.textContent='ì•ˆë“œë¡œì´ë“œ: ì•Œë¦¼/ë‹¤ìš´ë¡œë“œ ëª©ë¡ì—ì„œ .ics íŒŒì¼ì„ íƒ­í•˜ë©´ ìº˜ë¦°ë”ë¡œ ì—´ë¦½ë‹ˆë‹¤.';
                }
              }
            } else {
              openIcsLocal();
            }
          });
        }
      })();

      /* í°íŠ¸ ë¡œë“œ í›„ ë§ì¶¤ */
      if (document.fonts && document.fonts.ready) {
        document.fonts.ready.then(fitHeroTwoLines);
      } else {
        window.addEventListener('load', fitHeroTwoLines, { once: true });
      }

      /* ë³´ì¼€ íŒŒí‹°í´(Canvas) */
      (function bokehParticles(){
        const layer = document.getElementById('sparkLayer');
        if(!layer) return;

        const cvs = document.createElement('canvas');
        const ctx = cvs.getContext('2d');
        layer.appendChild(cvs);

        let w, h, dpr, rafId=null, paused=false;

        function resize(){
          dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
          w = layer.clientWidth; h = layer.clientHeight;
          cvs.width = Math.floor(w * dpr); 
          cvs.height = Math.floor(h * dpr);
          cvs.style.width = w + 'px'; 
          cvs.style.height = h + 'px';
        }
        resize(); 
        window.addEventListener('resize', resize);

        const colors = [[255,236,214],[255,213,163],[253,222,229],[246,189,197],[255,244,224]];
        const particles = [];
        const BASE_COUNT = 42;
        const COUNT = (window.matchMedia('(prefers-reduced-motion: reduce)').matches ? 20 : BASE_COUNT);

        function rnd(a,b){ return a + Math.random()*(b-a); }
        function pick(a){ return a[(Math.random()*a.length)|0]; }

        function spawn(y0){
          const r = rnd(6, 20), c = pick(colors);
          return { 
            x: rnd(-w*0.1, w*1.1), 
            y: y0 ?? rnd(h*0.55, h*1.12),
            r, vy: rnd(-0.22, -0.08), drift: rnd(-0.12, 0.12),
            a: rnd(0.35, 0.85), rgb: c, tw: rnd(2, 4), t0: Math.random()*6.28
          };
        }
        for(let i=0;i<COUNT;i++) particles.push(spawn());

        let scrollY = window.scrollY||0;
        window.addEventListener('scroll', ()=>{ scrollY = window.scrollY||0; }, {passive:true});

        function frame(){
          if (paused) return;
          ctx.clearRect(0,0,cvs.width,cvs.height);
          const parallax = scrollY * 0.02;

          for(let i=0;i<particles.length;i++){
            const p = particles[i];
            p.x += p.drift; 
            p.y += p.vy;
            if(p.y < -40){ particles[i] = spawn(h + rnd(10,120)); continue; }

            const tw = 0.5 + 0.5*Math.sin((performance.now()/1000)/p.tw + p.t0);
            const alpha = Math.max(0, Math.min(1, p.a*(0.65+0.35*tw)));
            const [r,g,b] = p.rgb, R = p.r;
            const x = p.x * dpr, y = (p.y - parallax) * dpr;

            const grad = ctx.createRadialGradient(x,y,R*0.2*dpr, x,y,R*dpr);
            grad.addColorStop(0,   `rgba(${r},${g},${b},${alpha*0.95})`);
            grad.addColorStop(0.6, `rgba(${r},${g},${b},${alpha*0.35})`);
            grad.addColorStop(1,   `rgba(${r},${g},${b},0)`);

            ctx.globalCompositeOperation = 'lighter';
            ctx.fillStyle = grad;
            ctx.beginPath(); 
            ctx.arc(x, y, R*dpr, 0, Math.PI*2); 
            ctx.fill();
          }
          rafId = requestAnimationFrame(frame);
        }

        function start(){ if (paused){ paused=false; rafId=requestAnimationFrame(frame);} }
        function stop(){ paused=true; if (rafId){ cancelAnimationFrame(rafId); rafId=null; } }

        // ë…¸ì¶œ
        window.__bokeh = { start, stop };

        // ì‹œì‘
        rafId = requestAnimationFrame(frame);
      })();


      /* ê¸€ì”¨ ì“°ëŠ” ë™ì•ˆë§Œ mask/clip êº¼ì„œ ê¹œë¹¡ì„ ì œê±° (í•„ê¸° ì• ë‹ˆë©”ì´ì…˜ì€ ìœ ì§€) */
      (function squashWhiteFlicker(){
        const svg = document.querySelector('.hero-svg');
        if(!svg) return;

        svg.classList.add('animfix');

        // âœ… ë§ˆì§€ë§‰ ì¤„ì˜ ë§ˆì§€ë§‰ fill ê¸€ë¦¬í”„ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì¢…ë£Œ ì²˜ë¦¬
        const rows = svg.querySelectorAll('.wgm-row');
        const lastRow = rows[rows.length - 1];
        const lastGlyph =
          (lastRow && lastRow.querySelector('.wgm-line:last-of-type .glyph.fill:last-of-type')) ||
          svg.querySelector('.glyph.fill:last-of-type'); // í´ë°±

        function done(){
          svg.classList.remove('animfix'); // ë§ˆìŠ¤í¬/í´ë¦½ ì›ë³µ
          svg.classList.add('done');       // ì´í›„ ì¬ìƒí•˜ì§€ ì•ŠìŒ
          lastGlyph && lastGlyph.removeEventListener('animationend', done);
        }

        if (lastGlyph) {
          lastGlyph.addEventListener('animationend', done);
          setTimeout(done, 8000); // ì•ˆì „ë§(í•„ìš”ì‹œ ì¡°ì ˆ)
        } else {
          svg.classList.remove('animfix');
          svg.classList.add('done');
        }
      })();

      (function initGoogleMap(){
        const el = document.getElementById('map');
        if(!el) return;
        // todo
        const q = encodeURIComponent('ì„œìš¸ ì¤‘êµ¬ ì²­íŒŒë¡œ 464 3ì¸µ ì±„í”Œì›¨ë”©í™€ ì•„ë²¤í‹°ì›€');
        el.innerHTML =
          `<iframe
              title="map"
              width="100%"
              height="300"
              style="border:0"
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"
              src="https://maps.google.com/maps?q=${q}&t=m&z=16&output=embed">
          </iframe>`;
      })();

      // ì´ˆê¸° ì •ë ¬(ë³´ì¥)
      fitHeroTwoLines();

      (function enableGalleryDragScroll(){
        const gal = document.getElementById('gallery');
        if (!gal) return;

        // í„°ì¹˜(ì†ê°€ë½/íœ)ëŠ” ë„¤ì´í‹°ë¸Œ ìŠ¤í¬ë¡¤ë§Œ ì‚¬ìš©í•˜ë„ë¡ í•¨
        // ë§ˆìš°ìŠ¤ë§Œ ë“œë˜ê·¸-ìŠ¤í¬ë¡¤ êµ¬í˜„
        let isDown = false, startX = 0, scrollX = 0, moved = false;

        // íŒŒí‹°í´ ì¼ì‹œì •ì§€(ìˆë‹¤ë©´)
        let pausedParticles = false, resumeTimer = null;
        const PAUSE_DELAY = 200;
        function pauseParticles(){
          if (window.__bokeh && !pausedParticles){ window.__bokeh.stop(); pausedParticles = true; }
          clearTimeout(resumeTimer);
          resumeTimer = setTimeout(()=>{
            if (window.__bokeh && pausedParticles){ window.__bokeh.start(); pausedParticles = false; }
          }, PAUSE_DELAY);
        }

        // rAFë¡œ ìŠ¤í¬ë¡¤ ì—…ë°ì´íŠ¸(í”„ë ˆì„ë‹¹ 1íšŒ)
        let pending = false, targetScrollLeft = 0;
        function flush(){ pending = false; gal.scrollLeft = targetScrollLeft; }

        gal.addEventListener('pointerdown', (e)=>{
          if (e.pointerType !== 'mouse') return;     // â† ë§ˆìš°ìŠ¤ë§Œ!
          isDown = true; moved = false;
          startX = e.clientX; scrollX = gal.scrollLeft;
          gal.classList.add('is-dragging');
          pauseParticles();
        });

        gal.addEventListener('pointermove', (e)=>{
          if (!isDown || e.pointerType !== 'mouse') return;
          const dx = e.clientX - startX;
          if (Math.abs(dx) > 3) moved = true;
          targetScrollLeft = scrollX - dx;
          if (!pending){ pending = true; requestAnimationFrame(flush); }
          pauseParticles();
        });

        function settleToNearest(){
          // ê°€ì¥ ì¤‘ì•™ì— ê°€ê¹Œìš´ pictureë¡œ ë³´ì •(ë§ˆìš°ìŠ¤ì—ì„œë§Œ)
          const pics = Array.from(gal.querySelectorAll('picture'));
          if (!pics.length) return;
          const center = gal.scrollLeft + gal.clientWidth/2;

          let best = 0, bestDist = Infinity;
          for (let i=0;i<pics.length;i++){
            const r = pics[i].getBoundingClientRect(); // ë·°í¬íŠ¸ ê¸°ì¤€
            const left = pics[i].offsetLeft;           // ìŠ¤í¬ë¡¤ ì»¨í…Œì´ë„ˆ ê¸°ì¤€
            const w = r.width;
            const mid = left + w/2;
            const d = Math.abs(mid - center);
            if (d < bestDist){ bestDist = d; best = i; }
          }
          const el = pics[best];
          const target = el.offsetLeft - (gal.clientWidth - el.clientWidth)/2;
          gal.scrollTo({ left: target, behavior: 'smooth' });
        }

        function endDrag(e){
          if (e && e.pointerType !== 'mouse') return;
          isDown = false;
          gal.classList.remove('is-dragging');
          pauseParticles();
          // ë§ˆìš°ìŠ¤ ë“œë˜ê·¸ë¥¼ ì¡°ê¸ˆë§Œ í–ˆì–´ë„, ê°€ì¥ ê°€ê¹Œìš´ ì¹´ë“œë¡œ ì •ë ¬
          if (moved) settleToNearest();
        }

        gal.addEventListener('pointerup', endDrag);
        gal.addEventListener('pointercancel', endDrag);
        gal.addEventListener('pointerleave', endDrag);

        // íœ (ì„¸ë¡œâ†’ê°€ë¡œ ì „í™˜)ì€ ìœ ì§€
        gal.addEventListener('wheel', (e)=>{
          if (Math.abs(e.deltaX) < Math.abs(e.deltaY)) {
            targetScrollLeft = gal.scrollLeft + e.deltaY;
            if (!pending){ pending = true; requestAnimationFrame(flush); }
            e.preventDefault();
            pauseParticles();
          }
        }, { passive:false });

        // ë“œë˜ê·¸ ì§í›„ í´ë¦­ ë¬´ì‹œ(ë¼ì´íŠ¸ë°•ìŠ¤ ì˜¤ì‘ë™ ë°©ì§€)
        gal.addEventListener('click', (e)=>{
          if (!moved) return;
          e.preventDefault(); 
          e.stopPropagation();
          moved = false;
        }, true);
      })();

      (function warmupGalleryImages(){
        const gal = document.getElementById('gallery');
        if (!gal) return;

        const imgs = [...gal.querySelectorAll('picture > img')];

        // êµì°¨ì˜ì—­ì„ ë„‰ë„‰íˆ ì¡ì•„ 'ë°”ë¡œ ë‹¤ìŒ/ì´ì „' ì´ë¯¸ì§€ë„ ë¯¸ë¦¬ ë””ì½”ë”©
        const io = new IntersectionObserver(async (ents)=>{
          for (const e of ents){
            if (!e.isIntersecting) continue;
            const img = e.target;

            // í˜„ì¬ ë³´ì´ëŠ” ì´ë¯¸ì§€ëŠ” fetch priorityë¥¼ ë†’ì—¬ì„œ ì¦‰ì‹œ ë°›ë„ë¡
            try { img.fetchPriority = 'high'; } catch(_) {}

            // ë””ì½”ë”©(ì´ë¯¸ ë°›ì•„ë†¨ë‹¤ë©´ ë°”ë¡œ resolve) â†’ ìŠ¤í¬ë¡¤ ì¤‘ í•´ì œ ë¹„ìš© ì œê±°
            try { await img.decode(); } catch(_) {}

            // ê·¼ì²˜ ì´ì›ƒë„ ë¯¸ë¦¬ ë””ì½”ë”©(Â±1, Â±2 ì •ë„)
            const i = imgs.indexOf(img);
            const neigh = [i-2, i-1, i+1, i+2].filter(j=> j>=0 && j<imgs.length);
            for (const j of neigh){
              const nimg = imgs[j];
              try { nimg.fetchPriority = 'auto'; } catch(_) {}
              // ì†ŒìŠ¤ê°€ ì•„ì§ data-srcsetì—ì„œ ì˜®ê²¨ì§€ì§€ ì•Šì•˜ì„ ìˆ˜ë„ ìˆìœ¼ë‹ˆ currentSrc/fallback ë³´ì¥
              if (!nimg.complete) { try { await nimg.decode(); } catch(_) {} }
            }
          }
        }, {
          root: gal,
          rootMargin: '50% 40%',   // ê°€ë¡œ ìŠ¤í¬ë¡¤ íŠ¹ì„±ìƒ ì¢Œìš°ë¥¼ ë„“ê²Œ ê´€ì°°
          threshold: 0.01
        });

        imgs.forEach(img => io.observe(img));
      })();

      

    });

    // data-track ê°’ì„ --track ì»¤ìŠ¤í…€ ë³€ìˆ˜ë¡œ ë°˜ì˜
    document.querySelectorAll('.name-line[data-track]').forEach(el=>{
      el.style.setProperty('--track', el.getAttribute('data-track'));
    });
  </script>

  <!-- ê³„ì¢Œ ì•„ì½”ë””ì–¸/ë³µì‚¬: ë³„ë„ ìŠ¤ì½”í”„ -->
  <script>
    (function(){
      const acc = document.querySelector('.account');
      if(!acc) return;

      // ê³„ì¢Œ: ë³µì‚¬ ë²„íŠ¼ (account ì„¹ì…˜ìœ¼ë¡œ ì´ë²¤íŠ¸ ìœ„ì„)
      acc.addEventListener('click', (e)=>{
        const btn = e.target.closest('button.btn-copy.copy');
        if(!btn) return;
        const text = btn.dataset.copy || '';
        if(!text) return;
        navigator.clipboard.writeText(text).then(()=>{
          if (!btn.dataset.old) btn.dataset.old = btn.textContent;
          btn.textContent = 'ë³µì‚¬ë¨';
          setTimeout(()=>{ btn.textContent = btn.dataset.old || 'ë³µì‚¬'; delete btn.dataset.old; }, 1200);
        }).catch(()=>{ /* í•„ìš” ì‹œ ì˜¤ë¥˜ ì²˜ë¦¬ */ });
      });

      // ì•„ì½”ë””ì–¸: í´ë¦­í•œ ì„¹ì…˜ë§Œ í† ê¸€
      acc.querySelectorAll('.acc-accordion details > summary').forEach(sum=>{
        sum.addEventListener('click', (e)=>{
          e.preventDefault();           // ê¸°ë³¸ í† ê¸€ ë§‰ê³ 
          const host = sum.parentElement;
          host.open = !host.open;       // í•´ë‹¹ ì„¹ì…˜ë§Œ í† ê¸€
          // ë™ì‹œì— í•˜ë‚˜ë§Œ ì—´ë¦¬ê²Œ í•˜ë ¤ë©´ ì•„ë˜ ì£¼ì„ í•´ì œ
          // acc.querySelectorAll('.acc-accordion details').forEach(d => { if (d!==host) d.open = false; });
        });
      });
    })();
  </script>

  <script>
    (function blockSafariSmartZoomOnlyWhenLightboxOpen(){
      const lb = document.getElementById('lightbox');
      if (!lb) return;

      let lastTouchEnd = 0;
      const onDoubleTap = (e) => {
        if (!lb.classList.contains('open')) return;
        const now = Date.now();
        if (now - lastTouchEnd <= 300) {
          e.preventDefault();
        }
        lastTouchEnd = now;
      };

      const onGesture = (e) => {
        if (!lb.classList.contains('open')) return;
        e.preventDefault();
      };

      // passive:false ê¼­ í•„ìš” (preventDefault ìœ„í•´)
      document.addEventListener('touchend', onDoubleTap, { passive: false });
      document.addEventListener('gesturestart', onGesture, { passive: false });
      document.addEventListener('gesturechange', onGesture, { passive: false });
      document.addEventListener('gestureend', onGesture, { passive: false });
    })();
  </script>



</body>
</html>
